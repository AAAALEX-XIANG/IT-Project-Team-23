(this.webpackJsonppiap=this.webpackJsonppiap||[]).push([[0],{142:function(e,t,a){e.exports=a.p+"static/media/empty.8d3e0a89.png"},164:function(e,t){e.exports="data:image/jpeg;base64,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"},170:function(e,t,a){e.exports=a(307)},175:function(e,t,a){},176:function(e,t,a){},307:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(26),o=a.n(l),s=(a(175),a(23)),i=a(24),c=a(30),u=a(28),m=(a(176),a(142)),p=a.n(m);function d(){return r.a.createElement("header",{className:"mainHeader"},r.a.createElement("div",{className:"headerContainer"},r.a.createElement("div",{className:"logoContainer"},r.a.createElement("img",{src:p.a,className:"logo",alt:"logo"})),r.a.createElement("div",{className:"messageContainer"},"Welcome to Fate e-portfolio")))}var h=a(76),f=a(44),g=a(25),A=a(47),v=a(316),E=a(317),b=a(318),y=a(319);function w(){return r.a.createElement("nav",{className:"navbar"},r.a.createElement("h2",null,"\xa0\xa0\xa0\xa0"),r.a.createElement("h2",null,"\xa0\xa0\xa0\xa0"),r.a.createElement("ul",null,r.a.createElement("li",{className:"navOption"},r.a.createElement(A.b,{to:"/admin/dashboard",className:"current-page",activeClassName:"selected"},r.a.createElement(v.a,null)," Home"," ")),r.a.createElement("li",{className:"navOption"},r.a.createElement(A.b,{to:"/admin/article",className:"current-page",activeClassName:"selected"},r.a.createElement(E.a,null)," Artifact"," ")),r.a.createElement("li",{className:"navOption"},r.a.createElement(A.b,{to:"/admin/category",className:"current-page",activeClassName:"selected"},r.a.createElement(b.a,null)," Category"," ")),r.a.createElement("li",{className:"navOption"},r.a.createElement(A.b,{to:"/login",onClick:function(){var e="https://fate-e-portfolio.herokuapp.com/api/cache/clear/"+"".concat(localStorage.getItem("email"));fetch(e,{method:"GET"}),localStorage.clear(),window.location.replace("/login")}},r.a.createElement(y.a,null)," Logout"," "))))}var N=a(315),k=a(309),S=a(83),x=a(320),C=a(321),O=a(6),I=a.n(O),j=a(18),L="https://fate-e-portfolio.herokuapp.com/api/profile";function P(){return(P=Object(j.a)(I.a.mark((function e(t){var a,n,r,l,o,s,i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.firstname,r=t.lastname,l=t.username,o=t.description,(s=new FormData).append("email",a),s.append("firstname",n),s.append("lastname",r),s.append("username",l),s.append("description",o),L+"/updateProfile",e.prev=8,e.next=11,fetch("https://fate-e-portfolio.herokuapp.com/api/profile/updateProfile",{method:"POST",body:s});case 11:i=e.sent,e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(8),console.log(e.t0),e.abrupt("return",{error:e.t0});case 18:return e.next=20,i.status;case 20:return e.t1=e.sent,e.next=23,i.json();case 23:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 25:case"end":return e.stop()}}),e,null,[[8,14]])})))).apply(this,arguments)}function U(){return(U=Object(j.a)(I.a.mark((function e(t){var a,n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,L+"/viewprofile",(n=new FormData).append("email",a),console.log(a),e.prev=5,e.next=8,fetch("https://fate-e-portfolio.herokuapp.com/api/profile/viewprofile",{method:"POST",body:n});case 8:r=e.sent,e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(5),console.log(e.t0),e.abrupt("return",{error:e.t0});case 15:return console.log(r),e.next=18,r.status;case 18:return e.t1=e.sent,e.next=21,r.json();case 21:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 23:case"end":return e.stop()}}),e,null,[[5,11]])})))).apply(this,arguments)}function T(){return(T=Object(j.a)(I.a.mark((function e(t){var a,n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,L+"/generate-link",(n=new FormData).append("email",a),e.prev=4,e.next=7,fetch("https://fate-e-portfolio.herokuapp.com/api/profile/generate-link",{method:"POST",body:n});case 7:r=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.log(e.t0),e.abrupt("return",{error:e.t0});case 14:return e.next=16,r.status;case 16:return e.t1=e.sent,e.next=19,r.text();case 19:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 21:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}var F=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"loadingBox"},r.a.createElement("div",{className:"monstertext"},r.a.createElement("h2",null,"Hello"),r.a.createElement("h3",null,"Please wait...")),r.a.createElement("div",{className:"monster"},r.a.createElement("div",{className:"eye"},r.a.createElement("div",{className:"eyeball"})),r.a.createElement("div",{className:"mouth"})),r.a.createElement("div",{className:"monster blue"},r.a.createElement("div",{className:"eye"},r.a.createElement("div",{className:"eyeball"})),r.a.createElement("div",{className:"mouth"})),r.a.createElement("div",{className:"monster red"},r.a.createElement("div",{className:"eye"},r.a.createElement("div",{className:"eyeball"})),r.a.createElement("div",{className:"mouth"})))}}]),a}(n.Component),D="https://fate-e-portfolio.herokuapp.com/api/profile/updateAvatar";function B(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||N.b.error("You can only upload JPG/PNG file!");var a=e.size/1024/1024<1;return a||N.b.error("Image must smaller than 1MB!"),t&&a}var q=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e){"uploading"!==e.file.status?"done"===e.file.status&&(!function(e,t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)})),a.readAsDataURL(e)}(e.file.originFileObj,(function(e){return n.setState({imageUrl:e,loading:!1})})),console.log("done!")):n.setState({loading:!0})},n.changeEdit=function(){n.setState({ifEdit:!0})},n.enterLoading=function(e){n.setState((function(t){var a=t.loadings,n=Object(f.a)(a);return n[e]=!0,{loadings:n}})),setTimeout((function(){n.setState((function(t){var a=t.loadings,n=Object(f.a)(a);return n[e]=!1,{loadings:n}}))}),12e3)},n.state={userInfo:null,username:"",firstname:"",lastname:"",description:"",isLoaded:!1,error:null,loading:!1,imageUrl:null,ifEdit:!1,status:!1,loadings:[],shareLink:""},n.handleChange=n.handleChange.bind(Object(g.a)(n)),n.changeEdit=n.changeEdit.bind(Object(g.a)(n)),n.handleUpdate=n.handleUpdate.bind(Object(g.a)(n)),n.submitProfile=n.submitProfile.bind(Object(g.a)(n)),n.getShareLink=n.getShareLink.bind(Object(g.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.fetchInfo(localStorage.getItem("email"))}},{key:"handleUpdate",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(h.a)({},n,a))}},{key:"submitProfile",value:function(e){var t=this,a=e.firstname,n=e.lastname,r=e.username,l=e.description;this.enterLoading(0),0===a.length||0===n.length||0===r.length?alert("name cannot be empty"):function(e){return P.apply(this,arguments)}({email:localStorage.getItem("email"),firstname:a,lastname:n,username:r,description:l}).then((function(e){return t.setState({status:e.res.result})}))}},{key:"fetchInfo",value:function(e){var t=this;(function(e){return U.apply(this,arguments)})({email:e}).then((function(e){return t.setState({userInfo:e,isLoaded:!0,username:e.res.username,loading:!1,firstname:e.res.firstname,lastname:e.res.lastname,description:e.res.description,imageUrl:t.setImage(e.res.avatar),shareLink:e.res.link})}))}},{key:"setImage",value:function(e){if(null!==e){var t=e.image.data;return"data:"+e.imageType+";base64,"+t}return null}},{key:"getShareLink",value:function(){window.confirm("Are you sure to replace your previous link with a new link?")&&(function(e){return T.apply(this,arguments)}({email:localStorage.getItem("email")}).then((function(e){return e.res})),window.location.replace("/admin/dashboard"))}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoaded,n=t.firstname,l=t.lastname,o=t.username,s=t.description,i=t.error,c=t.loading,u=t.imageUrl,m=t.ifEdit,p=t.loadings;if(!0===this.state.status&&window.location.replace("/admin/dashboard"),i)return r.a.createElement("div",{className:"pageContainer"},r.a.createElement(w,null),r.a.createElement("p",{className:"message"},"Something went wrong. Error: ",i.message),";");if(a){var d=r.a.createElement("div",{className:"uploadButton"},c?r.a.createElement(x.a,null):r.a.createElement(C.a,null),r.a.createElement("div",{className:"uploadInfo"},"Upload"));return m?r.a.createElement("div",{className:"pageContainer"},r.a.createElement(w,null),r.a.createElement("div",{className:"grid-container"},r.a.createElement("div",{className:"leftCol"},r.a.createElement("div",{className:"avatarBox"},r.a.createElement(k.a,{name:"image",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:D+"/".concat(localStorage.getItem("email")),beforeUpload:B,onChange:this.handleChange},u?r.a.createElement("img",{src:u,alt:"avatar",style:{width:"10rem",height:"10rem"}}):d)),r.a.createElement("div",{className:"editButtonBox"},r.a.createElement("div",{className:"avatarMessage"},"Click the image to update your avatar"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(S.a,{block:!0,disabled:!0},"Edit Profile"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(S.a,{block:!0,disabled:!0},"Generate a new share link"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(S.a,{block:!0,value:"default",loading:p[0],onClick:function(){return e.submitProfile({firstname:n,lastname:l,username:o,description:s})}},"Update"))),r.a.createElement("div",{className:"rightCol"},r.a.createElement("div",{className:"profileHeadings"},"Profile"),r.a.createElement("div",{className:"profileInfo"},"Email:",r.a.createElement("div",{className:"currentInfo"},localStorage.getItem("email"))),r.a.createElement("div",{className:"profileInfo"},"Username:",r.a.createElement("div",{className:"currentInfo"},r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleUpdate,required:!0}))),r.a.createElement("div",{className:"nameInfo"},r.a.createElement("div",{className:"profileInfo"},"First name:",r.a.createElement("div",{className:"currentInfo"},r.a.createElement("input",{type:"text",name:"firstname",value:this.state.firstname,onChange:this.handleUpdate,required:!0}))),r.a.createElement("div",{className:"profileInfo"},"Last name:",r.a.createElement("div",{className:"currentInfo"},r.a.createElement("input",{type:"text",name:"lastname",value:this.state.lastname,onChange:this.handleUpdate,required:!0})))),r.a.createElement("div",{className:"profileInfo"},"Self Introduction:",r.a.createElement("div",{className:"currentInfo"},r.a.createElement("textarea",{type:"text",name:"description",rows:"2",cols:"50",maxLength:"200",value:this.state.description,onChange:this.handleUpdate,required:!0}))),r.a.createElement("div",{className:"profileInfo"},"Sharable Link:",r.a.createElement("div",{className:"currentInfo"},r.a.createElement("a",{href:"http://localhost:3000/guest/dashboard/"+this.state.shareLink},"http://localhost:3000/guest/dashboard/"+this.state.shareLink)))))):r.a.createElement("div",{className:"pageContainer"},r.a.createElement(w,null),r.a.createElement("div",{className:"grid-container"},r.a.createElement("div",{className:"leftCol"},r.a.createElement("div",{className:"avatarBox"},r.a.createElement(k.a,{name:"image",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:D+"/".concat(localStorage.getItem("email")),beforeUpload:B,onChange:this.handleChange},r.a.createElement("div",{className:"curAvatar"},u?r.a.createElement("img",{src:u,alt:"avatar",style:{width:"10rem",height:"10rem"}}):d))),r.a.createElement("div",{className:"editButtonBox"},r.a.createElement("div",{className:"avatarMessage"},"Click the image to update your avatar"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(S.a,{block:!0,onClick:this.changeEdit},"Edit Profile"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(S.a,{block:!0,onClick:this.getShareLink},"Generate a new share link"))),r.a.createElement("div",{className:"rightCol"},r.a.createElement("div",{className:"profileHeadings"},"Profile"),r.a.createElement("div",{className:"profileInfo"},"Email:",r.a.createElement("div",{className:"currentInfo"},localStorage.getItem("email"))),r.a.createElement("div",{className:"profileInfo"},"Username:",r.a.createElement("div",{className:"currentInfo"},this.state.username)),r.a.createElement("div",{className:"nameInfo"},r.a.createElement("div",{className:"profileInfo"},"First name:",r.a.createElement("div",{className:"currentInfo"},this.state.firstname)),r.a.createElement("div",{className:"profileInfo"},"Last name:",r.a.createElement("div",{className:"currentInfo"},this.state.lastname))),r.a.createElement("div",{className:"profileInfo"},"Self Introduction:",r.a.createElement("div",{className:"intro"},this.state.description)),r.a.createElement("div",{className:"profileInfo"},"Sharable Link:",r.a.createElement("div",{className:"currentInfo"},r.a.createElement("a",{href:"http://localhost:3000/guest/dashboard/"+this.state.shareLink},"http://localhost:3000/guest/dashboard/"+this.state.shareLink))))))}return r.a.createElement("div",{className:"pageContainer"},r.a.createElement(w,null),r.a.createElement(F,null))}}]),a}(n.Component),M=a(312),R=a(322),J=a(323),K=a(324),z=a(325),G="https://fate-e-portfolio.herokuapp.com/api/artifacts";function Q(){return(Q=Object(j.a)(I.a.mark((function e(t){var a,n,r,l,o,s,i,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.category,r=t.title,l=t.description,o=t.attachment,s=t.privacy,(i=new FormData).append("email",a),i.append("category",n),i.append("title",r),i.append("description",l),i.append("attachment",o),i.append("privacy",s),G+"/upload",e.prev=9,e.next=12,fetch("https://fate-e-portfolio.herokuapp.com/api/artifacts/upload",{method:"POST",body:i});case 12:c=e.sent,e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(9),console.log(e.t0),e.abrupt("return",{error:e.t0});case 19:return e.next=21,c.status;case 21:return e.t1=e.sent,e.next=24,c.json();case 24:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 26:case"end":return e.stop()}}),e,null,[[9,15]])})))).apply(this,arguments)}function V(e){return W.apply(this,arguments)}function W(){return(W=Object(j.a)(I.a.mark((function e(t){var a,n,r,l,o,s;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.category,r=t.artifact,l=t.privacy,G+"/change-privacy",(o=new FormData).append("email",a),o.append("category",n),o.append("artifact",r),o.append("privacy",l),e.prev=7,e.next=10,fetch("https://fate-e-portfolio.herokuapp.com/api/artifacts/change-privacy",{method:"POST",body:o});case 10:s=e.sent,e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(7),console.log(e.t0),e.abrupt("return",{error:e.t0});case 17:return e.t1=console,e.next=20,s;case 20:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.next=24,s.status;case 24:return e.t3=e.sent,e.next=27,s.json();case 27:return e.t4=e.sent,e.abrupt("return",{status:e.t3,res:e.t4});case 29:case"end":return e.stop()}}),e,null,[[7,13]])})))).apply(this,arguments)}function H(){return(H=Object(j.a)(I.a.mark((function e(t){var a,n,r,l;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.category,r=t.artifact,G+"/delete-artifact",e.prev=2,e.next=5,fetch("https://fate-e-portfolio.herokuapp.com/api/artifacts/delete-artifact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,category:n,artifact:r})});case 5:l=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",{error:e.t0});case 12:return e.next=14,l.status;case 14:return e.t1=e.sent,e.next=17,l.json();case 17:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 19:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function X(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(j.a)(I.a.mark((function e(t){var a,n,r,l,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.category,r=t.artifact,l=t.attachment,G+"/get-attachment",e.prev=2,e.next=5,fetch("https://fate-e-portfolio.herokuapp.com/api/artifacts/get-attachment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,category:n,artifact:r,attachment:l})});case 5:o=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",{error:e.t0});case 12:return e.t1=console,e.next=15,o;case 15:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.next=19,o.status;case 19:return e.t3=e.sent,e.next=22,o.json();case 22:return e.t4=e.sent,e.abrupt("return",{status:e.t3,res:e.t4});case 24:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function Y(){return(Y=Object(j.a)(I.a.mark((function e(t){var a,n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,G+"/show-Category-Artifact-Attachment",(n=new FormData).append("email",a),e.prev=4,e.next=7,fetch("https://fate-e-portfolio.herokuapp.com/api/artifacts/show-Category-Artifact-Attachment",{method:"POST",body:n});case 7:r=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.log(e.t0),e.abrupt("return",{error:e.t0});case 14:return e.t1=console,e.next=17,r;case 17:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.next=21,r.status;case 21:return e.t3=e.sent,e.next=24,r.json();case 24:return e.t4=e.sent,e.abrupt("return",{status:e.t3,res:e.t4});case 26:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}var _="https://fate-e-portfolio.herokuapp.com/api/categories";function $(){return($=Object(j.a)(I.a.mark((function e(t){var a,n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.categoryName,_+"/addCategory",e.prev=2,e.next=5,fetch("https://fate-e-portfolio.herokuapp.com/api/categories/addCategory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,categoryName:n})});case 5:r=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",{error:e.t0});case 12:return e.t1=console,e.next=15,r;case 15:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.next=19,r.status;case 19:return e.t3=e.sent,e.next=22,r.json();case 22:return e.t4=e.sent,e.abrupt("return",{status:e.t3,res:e.t4});case 24:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function ee(){return(ee=Object(j.a)(I.a.mark((function e(t){var a,n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.categoryName,_+"/deleteCategory",e.prev=2,e.next=5,fetch("https://fate-e-portfolio.herokuapp.com/api/categories/deleteCategory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,categoryName:n})});case 5:r=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",{error:e.t0});case 12:return e.t1=console,e.next=15,r;case 15:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.next=19,r.status;case 19:return e.t3=e.sent,e.next=22,r.json();case 22:return e.t4=e.sent,e.abrupt("return",{status:e.t3,res:e.t4});case 24:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function te(e){return ae.apply(this,arguments)}function ae(){return(ae=Object(j.a)(I.a.mark((function e(t){var a,n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,_+"/showCategories",(r=new FormData).append("email",a),e.prev=4,e.next=7,fetch("https://fate-e-portfolio.herokuapp.com/api/categories/showCategories",{method:"POST",body:r});case 7:n=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.log(e.t0),e.abrupt("return",{error:e.t0});case 14:return e.next=16,n.status;case 16:return e.t1=e.sent,e.next=19,n.json();case 19:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 21:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}var ne=M.a.Panel,re=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).showAllCate=function(){(function(e){return Y.apply(this,arguments)})({email:localStorage.getItem("email")}).then((function(e){return n.setState({files:e.res,isLoaded:!0})}))},n.enterLoading=function(e){n.setState((function(t){var a=t.loadings,n=Object(f.a)(a);return n[e]=!0,{loadings:n}})),setTimeout((function(){n.setState((function(t){var a=t.loadings,n=Object(f.a)(a);return n[e]=!1,{loadings:n}}))}),5e4)},n.state={files:{},loadings:[],isLoaded:!1},n.showAllCate=n.showAllCate.bind(Object(g.a)(n)),n.downloadAttachment=n.downloadAttachment.bind(Object(g.a)(n)),n.downloadFile=n.downloadFile.bind(Object(g.a)(n)),n}return Object(i.a)(a,[{key:"componentWillUnmount",value:function(){this.setState({files:{}}),console.log("clear")}},{key:"componentDidMount",value:function(){this.showAllCate(),console.log("loading")}},{key:"deleteCate",value:function(e){window.confirm("Are you sure to delete "+e.categoryName+"?")&&function(e){return ee.apply(this,arguments)}(e).then((function(e){return window.location.replace("/admin/category")}))}},{key:"deleteArti",value:function(e){window.confirm("Are you sure to delete "+e.artifact+"?")&&function(e){return H.apply(this,arguments)}(e).then((function(e){return window.location.replace("/admin/category")}))}},{key:"changePrivacy",value:function(e){"public"===e.privacy?window.confirm("Are you sure to change public to private?")&&V({email:localStorage.getItem("email"),category:e.category,artifact:e.artifact,privacy:"private"}).then((function(e){return window.location.replace("/admin/category")})):window.confirm("Are you sure to change private to public?")&&V({email:localStorage.getItem("email"),category:e.category,artifact:e.artifact,privacy:"public"}).then((function(e){return window.location.replace("/admin/category")}))}},{key:"downloadFile",value:function(e){var t=e.content,a=document.getElementsByClassName("pageContainer")[0];if(a.hasChildNodes()){for(var n=a.childNodes,r=0;r<n.length;r++)"OBJECT"===n[r].nodeName&&a.removeChild(n[r]);var l=document.createElement("a");l.style.cssFloat="right",l.download=e.filename,l.href="data:application/octet-stream;base64,"+t,a.appendChild(l).click()}}},{key:"viewFile",value:function(e){var t=e.content,a=e.filetype,n=document.getElementsByClassName("pageContainer")[0];if(n.hasChildNodes()){for(var r=n.childNodes,l=0;l<r.length;l++)if("OBJECT"===r[l].nodeName)n.removeChild(r[l]);else if("A"===r[l].nodeName){n.removeChild(r[l]);break}if("application/pdf"===a||"image/jpeg"===a||"image/png"===a||"text/plain"===a){var o=document.createElement("object");o.className="viewContainer","application/pdf"===a||"text/plain"===a?o.style.height="700px":(o.style.height="45%",o.style.maxHeight="650px",o.style.maxWidth="700px"),o.style.width="60%",o.style.cssFloat="center",o.type=a,o.data="data:"+a+";base64,"+t,n.appendChild(o)}else alert("Sorry, you are not allowed to view ".concat(a," files"));this.setState({loadings:[]})}}},{key:"downloadAttachment",value:function(e,t){var a=this;X(e).then((function(e){return a.downloadFile(e.res)})),this.enterLoading(t)}},{key:"viewAttachment",value:function(e,t){var a=this;X(e).then((function(e){return a.viewFile(e.res)})),this.enterLoading(t)}},{key:"render",value:function(){var e=this,t=this.state,a=t.files,n=t.loadings,l=t.isLoaded,o=[],s=new Map;for(var i in a){o.push(i);var c=[];for(var u in a[i])c.push(u);s.set(i,c)}return l?r.a.createElement("div",{className:"pageContainer"},r.a.createElement(w,null),r.a.createElement("div",{className:"cateContainer"},r.a.createElement(M.a,{accordion:!0},o.map((function(t){return r.a.createElement(ne,{header:"Category: "+t,key:t,extra:r.a.createElement(R.a,{onClick:function(){return e.deleteCate({email:localStorage.getItem("email"),categoryName:t})}})},r.a.createElement(M.a,{accordion:!0},s.get(t).map((function(l){return r.a.createElement(ne,{header:"Artifact: "+l,key:l,extra:r.a.createElement(R.a,{onClick:function(){return e.deleteArti({email:localStorage.getItem("email"),category:t,artifact:l})}})},r.a.createElement("div",{className:"CateInfo"},"Description:",r.a.createElement("div",{className:"currentInfo"},r.a.createElement("p",null,a[t][l][0]))),r.a.createElement("div",{className:"CateInfo"},"Current Privacy State:",r.a.createElement("div",{className:"currentInfo"},a[t][l][1])),r.a.createElement(S.a,{loading:n[4],onClick:function(){return e.changePrivacy({email:localStorage.getItem("email"),category:t,artifact:l,privacy:a[t][l][1]})},icon:r.a.createElement(J.a,null)},"Click to switch state"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"CateInfo"},"Attachments:",a[t][l].slice(2).map((function(o,s){return r.a.createElement("div",{key:s+5},r.a.createElement("div",{className:"currentAttachmentInfo"},r.a.createElement("p",null,o)),r.a.createElement(S.a,{loading:n[s+5],onClick:function(){return e.viewAttachment({email:localStorage.getItem("email"),category:t,artifact:l,attachment:o},s+5)},id:"downloadBtn",icon:r.a.createElement(K.a,null),size:"small"},"View"),r.a.createElement(S.a,{loading:n[s+a[t][l].length+5],onClick:function(){return e.downloadAttachment({email:localStorage.getItem("email"),category:t,artifact:l,attachment:o},s+a[t][l].length+5)},id:"downloadBtn",icon:r.a.createElement(z.a,null),size:"small"},"download"))})),r.a.createElement("br",null)))}))))}))))):r.a.createElement("div",{className:"pageContainer"},r.a.createElement(w,null),r.a.createElement(F,null))}}]),a}(n.Component),le=a(92),oe=a(310),se=a(313),ie=a(308),ce=a(314),ue=(a(224),a(326)),me=le.a.Option,pe=k.a.Dragger,de=0,he={labelCol:{span:6},wrapperCol:{span:14}},fe=[],ge="https://fate-e-portfolio.herokuapp.com/api/cache/upload",Ae={name:"file",multiple:!0,action:ge+"/".concat(localStorage.getItem("email")),onChange:function(e){var t=e.file.status;"uploading"!==t&&(fe=e.fileList,console.log(e.file,e.fileList)),"done"===t?(fe=e.fileList,console.log("file:::",fe),N.b.success("".concat(e.file.name," file uploaded successfully."))):"error"===t&&N.b.error("".concat(e.file.name," file upload failed."))}},ve=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).categories=te({email:localStorage.getItem("email")}).then((function(e){return n.setState({items:e.res.categories})})),n.onNameChange=function(e){n.setState({name:e.target.value,value:e.target.value})},n.onCategoryChange=function(e){n.setState({name:e}),console.log("event",e)},n.loadAllcates=function(){te({email:localStorage.getItem("email")}).then((function(e){return n.setState({items:e.res.categories})}))},n.onTitleChange=function(e){n.setState({title:e.target.value})},n.onDescriptionChange=function(e){n.setState({description:e.target.value})},n.onPrivacyChange=function(e){n.setState({privacy:e.target.value})},n.addItem=function(){var e=n.state,t=e.items,a=e.name,r=e.value;-1===t.indexOf(r)?(n.setState({items:[].concat(Object(f.a)(t),[a||"New item ".concat(de++)]),name:"",value:""}),function(e){$.apply(this,arguments)}({email:localStorage.getItem("email"),categoryName:a})):alert("Category exists")},n.uploadFiles=function(){var e;n.enterLoading(0);var t=[];for(e=0;e<fe.length;e++)t.push(fe[e].name);""===n.state.title?alert("Title cannot be empty"):""===n.state.privacy?alert("Please choose privary"):function(e){return Q.apply(this,arguments)}({email:localStorage.getItem("email"),category:n.state.name,title:n.state.title,description:n.state.description,attachment:t,privacy:n.state.privacy}).then((function(e){return n.checkArti(e.res)}))},n.enterLoading=function(e){n.setState((function(t){var a=t.loadings,n=Object(f.a)(a);return n[e]=!0,{loadings:n}})),setTimeout((function(){n.setState((function(t){var a=t.loadings,n=Object(f.a)(a);return n[e]=!1,{loadings:n}}))}),3e3)},n.state={value:"",items:[],name:"",title:"",description:"",privacy:"",loadings:[]},n}return Object(i.a)(a,[{key:"componentWillUnmount",value:function(){this.setState({value:"",items:[],name:"",title:"",description:"",privacy:"",loadings:[]}),console.log("clear artifact")}},{key:"componentDidMount",value:function(){this.setState({value:"",items:[],name:"",title:"",description:"",privacy:"",loadings:[]}),this.loadAllcates(),console.log("load artifact")}},{key:"checkArti",value:function(e){e.result?window.location.replace("/admin/dashboard"):alert(e.reason)}},{key:"render",value:function(){var e=this,t=this.state,a=t.items,n=t.title,l=t.description,o=t.value,s=t.loadings;return Ae.action===ge+"/null"&&window.location.replace("/admin/article"),r.a.createElement("div",{className:"pageContainer"},r.a.createElement(w,null),r.a.createElement(oe.a,Object.assign({name:"validate_other"},he),r.a.createElement(oe.a.Item,null,r.a.createElement("div",{id:"header"},r.a.createElement("br",null),r.a.createElement("br",null),"Upload Document")),r.a.createElement(oe.a.Item,{label:r.a.createElement("label",{className:"variables"},"Title"),required:!0},r.a.createElement(se.a,{placeholder:"Enter Title",style:{flex:"auto"},value:n,onChange:this.onTitleChange})),r.a.createElement(oe.a.Item,{label:r.a.createElement("label",{className:"variables"},"Description")},r.a.createElement(se.a,{placeholder:"Enter Description",style:{flex:"auto"},value:l,onChange:this.onDescriptionChange})),r.a.createElement(oe.a.Item,{label:r.a.createElement("label",{className:"variables"},"Select the category"),required:!0},r.a.createElement(le.a,{onChange:this.onCategoryChange,style:{width:240},placeholder:"add new category",dropdownRender:function(t){return r.a.createElement("div",null,t,r.a.createElement(ie.a,{style:{margin:"4px 0"}}),r.a.createElement("div",{style:{display:"flex",flexWrap:"nowrap",padding:8}},r.a.createElement(se.a,{value:o,style:{flex:"auto"},onChange:e.onNameChange}),r.a.createElement("button",{className:"cateButton",onClick:e.addItem}," Add ")))}},a.map((function(e){return r.a.createElement(me,{key:e},e)})))),r.a.createElement(oe.a.Item,{name:"radio-group",label:r.a.createElement("label",{className:"variables"},"Privacy"),required:!0},r.a.createElement(ce.a.Group,null,r.a.createElement(ce.a,{value:"public",onChange:this.onPrivacyChange},r.a.createElement("label",{className:"privacy"}," Public ")),r.a.createElement(ce.a,{value:"private",onChange:this.onPrivacyChange},r.a.createElement("label",{className:"privacy"}," Private ")))),r.a.createElement(oe.a.Item,{label:r.a.createElement("label",{className:"variables"},"Dragger")},r.a.createElement(pe,Ae,r.a.createElement("p",{className:"ant-upload-drag-icon"},r.a.createElement(ue.a,null)),r.a.createElement("p",{className:"ant-upload-text"},"Click or drag file to this area to upload"),r.a.createElement("p",{className:"ant-upload-hint"},"Support for a single or bulk upload. Strictly prohibit from uploading company data or other band files"))),r.a.createElement(oe.a.Item,{wrapperCol:{span:12,offset:6}},r.a.createElement("p",null," ","Note: You can upload several files, but the size of each file must be less than 1 MB."," "),r.a.createElement(S.a,{value:"default",loading:s[0],onClick:this.uploadFiles},"Submit"))))}}]),a}(n.Component),Ee=a(67),be="https://fate-e-portfolio.herokuapp.com/api/account";function ye(e){return we.apply(this,arguments)}function we(){return(we=Object(j.a)(I.a.mark((function e(t){var a,n,r,l,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.email,n=t.password,r=be+"/login",(l=new FormData).append("email",a),l.append("password",n),a){e.next=8;break}return alert("please enter your email"),e.abrupt("return");case 8:if(n){e.next=11;break}return alert("please enter your password"),e.abrupt("return");case 11:return e.prev=11,e.next=14,fetch(r,{method:"POST",body:l});case 14:o=e.sent,e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(11),console.log(e.t0),e.abrupt("return",{error:e.t0});case 21:return e.t1=o.status,e.next=24,o.json();case 24:return e.t2=e.sent,e.abrupt("return",{status:e.t1,user:e.t2});case 26:case"end":return e.stop()}}),e,null,[[11,17]])})))).apply(this,arguments)}function Ne(e){return ke.apply(this,arguments)}function ke(){return(ke=Object(j.a)(I.a.mark((function e(t){var a,n,r,l,o,s,i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.first_name,n=t.last_name,r=t.email,l=t.username,o=t.password,s=t.studentId,be+"/register",console.log("register"),e.prev=3,e.next=6,fetch("https://fate-e-portfolio.herokuapp.com/api/account/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstname:a,lastname:n,studentId:s,emailaddress:r,username:l,password:o})});case 6:i=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),console.log(e.t0),e.abrupt("return",{error:e.t0});case 13:return console.log(i),e.t1=i.status,e.next=17,i.json();case 17:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 19:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}var Se=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={email:"",password:"",wrongAttempt:!1},n.handleChange=n.handleChange.bind(Object(g.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(g.a)(n)),n}return Object(i.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(h.a)({},n,a))}},{key:"handleSubmit",value:function(){var e=Object(j.a)(I.a.mark((function e(t){var a,n,r,l;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,ye({email:this.state.email,password:this.state.password});case 3:a=e.sent,n=a.status,r=a.user,200===n&&(this.setState({wrongAttempt:!1}),r.result?"User"===r.reason?(this.props.userStore.isLoggedIn=!0,this.props.userStore.email=this.state.email,localStorage.setItem("email",this.state.email),l="https://fate-e-portfolio.herokuapp.com/api/cache/clear/"+"".concat(localStorage.getItem("email")),fetch(l,{method:"GET"}),this.props.history.push("/admin/dashboard")):(this.props.userStore.isLoggedIn=!0,localStorage.setItem("adminEmail",this.state.email),this.props.history.push("/adminpage")):this.setState({wrongAttempt:!0}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h1",null,"Log In"),r.a.createElement("div",{className:"formDisplay"},r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Email",type:"text",name:"email",value:this.state.email,onChange:this.handleChange,required:!0})),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange,required:!0})),r.a.createElement("div",{className:"subTitle"},"Don't have an account? ",r.a.createElement("a",{href:"/register"},"Register")),r.a.createElement("br",null),this.state.wrongAttempt?r.a.createElement("div",{className:"formError"},"Please check your email and password"):null,r.a.createElement("input",{type:"submit",value:"Log In"})))}}]),a}(r.a.Component),xe=Object(Ee.g)(Se);function Ce(e){return r.a.createElement("div",{className:"wrap"},r.a.createElement("div",{className:"container"},r.a.createElement(xe,{userStore:e.userStore})),r.a.createElement("ul",null,r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null)))}var Oe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={first_name:"",last_name:"",email:"",studentId:"",username:"",password:"",password_confirm:"",result:!1,success:!1,res:""},n.handleChange=n.handleChange.bind(Object(g.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(g.a)(n)),n}return Object(i.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(h.a)({},n,a))}},{key:"handleSubmit",value:function(){var e=Object(j.a)(I.a.mark((function e(t){var a,n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(this.state.password.length<6)){e.next=4;break}return alert("Password should not be less than 6 characters"),e.abrupt("return");case 4:if(this.state.password===this.state.password_confirm){e.next=7;break}return alert("Inconsistent password"),e.abrupt("return");case 7:return e.next=9,Ne({first_name:this.state.first_name,last_name:this.state.last_name,studentId:this.state.studentId,email:this.state.email,username:this.state.username,password:this.state.password,password_confirm:this.state.password_confirm});case 9:a=e.sent,n=a.status,r=a.res,console.log(n),r.result?this.setState({success:200===n,res:r}):alert(r.reason),this.state.success&&this.props.history.push("/login");case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h1",null,"Register"),r.a.createElement("div",{className:"subTitle"},"Already have an account? ",r.a.createElement("a",{href:"/"},"Log in")),r.a.createElement("div",{className:"float"},r.a.createElement("div",{className:"floatLeft"},r.a.createElement("div",{className:"floatTop"},r.a.createElement("input",{placeholder:"Email",type:"email",name:"email",value:this.state.email,onChange:this.handleChange,required:!0})),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"First name",type:"text",name:"first_name",value:this.state.first_name,onChange:this.handleChange,required:!0})),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Last name",type:"text",name:"last_name",value:this.state.last_name,onChange:this.handleChange,required:!0})),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Student ID",type:"text",name:"studentId",value:this.state.studentId,onChange:this.handleChange,required:!0}))),r.a.createElement("div",{className:"floatRight"},r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Username",type:"text",name:"username",value:this.state.username,onChange:this.handleChange,required:!0})),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange,required:!0})),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Confirm password",type:"password",name:"password_confirm",value:this.state.password_confirm,onChange:this.handleChange,required:!0})),!this.state.success&&r.a.createElement("div",{className:"formError"},this.state.res),r.a.createElement("input",{type:"submit",value:"Register"}))))}}]),a}(r.a.Component),Ie=Object(Ee.g)(Oe);function je(){return r.a.createElement("div",{className:"wrap"},r.a.createElement("div",{className:"regContainer"},r.a.createElement(Ie,null)),r.a.createElement("div",{className:"wrapBubble"},r.a.createElement("ul",null,r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null))))}var Le=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"pageContainer"},r.a.createElement(w,null),r.a.createElement("div",null,"Your have already login, please log out to switch the account."))}}]),a}(n.Component),Pe=a(311);function Ue(){return(Ue=Object(j.a)(I.a.mark((function e(t){var a,n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.info,"https://fate-e-portfolio.herokuapp.com/api/search/show",(n=new FormData).append("info",a),e.prev=4,e.next=7,fetch("https://fate-e-portfolio.herokuapp.com/api/search/show",{method:"POST",body:n});case 7:r=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.log(e.t0),e.abrupt("return",{error:e.t0});case 14:return e.t1=console,e.next=17,r;case 17:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.next=21,r.status;case 21:return e.t3=e.sent,e.next=24,r.json();case 24:return e.t4=e.sent,e.abrupt("return",{status:e.t3,res:e.t4});case 26:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}var Te=se.a.Search,Fe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).searchUser=function(e){(function(e){return Ue.apply(this,arguments)})({info:e}).then((function(e){n.setState({data:e.res})}))},n.logout=function(){localStorage.clear(),window.location.replace("/login")},n.state={initLoading:!0,loading:!1,data:{}},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state.data,a=[];for(var n in t)a.push(n);return r.a.createElement("div",null,r.a.createElement("div",{className:"adminSearch"},r.a.createElement(Te,{placeholder:"search users",onSearch:function(t){return e.searchUser(t)},enterButton:!0}),r.a.createElement("div",null,r.a.createElement(A.b,{to:"/login",onClick:this.logout}," ","Logout"," "))),r.a.createElement(Pe.b,{itemLayout:"horizontal",dataSource:a,renderItem:function(e){return r.a.createElement(Pe.b.Item,null,r.a.createElement(Pe.b.Item.Meta,{title:r.a.createElement("a",{href:"http://localhost:3000/guest/dashboard/"+t[e][4]},t[e][1]),description:t[e][2]+" "+t[e][3]+", "+t[e][0]}))}}))}}]),a}(r.a.Component),De=window.location.pathname.split("/").pop();function Be(){return r.a.createElement("nav",{className:"navbar"},r.a.createElement("h2",null,"\xa0\xa0\xa0\xa0"),r.a.createElement("h2",null,"\xa0\xa0\xa0\xa0"),r.a.createElement("ul",null,r.a.createElement("li",{className:"navOption"},r.a.createElement(A.b,{to:"/guest/dashboard/"+De,className:"current-page",activeClassName:"selected"},r.a.createElement(v.a,null),"Home"," ")),r.a.createElement("li",{className:"navOption"},r.a.createElement(A.b,{to:"/guest/category/"+De,className:"current-page",activeClassName:"selected"},r.a.createElement(b.a,null),"Category"," "))))}var qe="https://fate-e-portfolio.herokuapp.com/api/guest",Me="https://fate-e-portfolio.herokuapp.com/api/artifacts";function Re(){return(Re=Object(j.a)(I.a.mark((function e(t){var a,n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.link,qe+"/showUserProfile",(n=new FormData).append("link",a),e.prev=4,e.next=7,fetch("https://fate-e-portfolio.herokuapp.com/api/guest/showUserProfile",{method:"POST",body:n});case 7:r=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.log(e.t0),e.abrupt("return",{error:e.t0});case 14:return e.next=16,r.status;case 16:return e.t1=e.sent,e.next=19,r.json();case 19:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 21:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}function Je(){return(Je=Object(j.a)(I.a.mark((function e(t){var a,n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.link,qe+"/showUserPublic",(n=new FormData).append("link",a),e.prev=4,e.next=7,fetch("https://fate-e-portfolio.herokuapp.com/api/guest/showUserPublic",{method:"POST",body:n});case 7:r=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.log(e.t0),e.abrupt("return",{error:e.t0});case 14:return e.next=16,r.status;case 16:return e.t1=e.sent,e.next=19,r.json();case 19:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 21:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}function Ke(e){return ze.apply(this,arguments)}function ze(){return(ze=Object(j.a)(I.a.mark((function e(t){var a,n,r,l,o,s;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.link,n=t.category,r=t.artifact,l=t.attachment,Me+"/get-attachment-byLink",(o=new FormData).append("link",a),o.append("category",n),o.append("artifact",r),o.append("attachment",l),e.prev=7,e.next=10,fetch("https://fate-e-portfolio.herokuapp.com/api/artifacts/get-attachment-byLink",{method:"POST",body:o});case 10:s=e.sent,e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(7),console.log(e.t0),e.abrupt("return",{error:e.t0});case 17:return e.t1=console,e.next=20,s;case 20:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.next=24,s.status;case 24:return e.t3=e.sent,e.next=27,s.json();case 27:return e.t4=e.sent,e.abrupt("return",{status:e.t3,res:e.t4});case 29:case"end":return e.stop()}}),e,null,[[7,13]])})))).apply(this,arguments)}var Ge=a(164),Qe=a.n(Ge),Ve=window.location.pathname.split("/").pop();var We=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e){"uploading"!==e.file.status?"done"===e.file.status&&(!function(e,t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)})),a.readAsDataURL(e)}(e.file.originFileObj,(function(e){return n.setState({imageUrl:e,loading:!1})})),console.log("done!")):n.setState({loading:!0})},n.enterLoading=function(e){n.setState((function(t){var a=t.loadings,n=Object(f.a)(a);return n[e]=!0,{loadings:n}})),setTimeout((function(){n.setState((function(t){var a=t.loadings,n=Object(f.a)(a);return n[e]=!1,{loadings:n}}))}),12e3)},n.state={userInfo:null,username:"",firstname:"",lastname:"",description:"",isLoaded:!1,error:null,loading:!1,imageUrl:null,ifEdit:!1,status:!1,loadings:[],shareLink:""},n.handleChange=n.handleChange.bind(Object(g.a)(n)),n}return Object(i.a)(a,[{key:"fetchInfo",value:function(e){var t=this;(function(e){return Re.apply(this,arguments)})({link:e}).then((function(e){return t.setState({userInfo:e,isLoaded:!0,username:e.res.username,loading:!1,firstname:e.res.firstname,lastname:e.res.lastname,description:e.res.description,imageUrl:t.setImage(e.res.avatar)})}))}},{key:"setImage",value:function(e){if(null!==e){var t=e.image.data;return"data:"+e.imageType+";base64,"+t}return Qe.a}},{key:"componentDidMount",value:function(){this.fetchInfo(Ve)}},{key:"render",value:function(){var e=this.state,t=e.isLoaded,a=e.error,n=e.imageUrl;return!0===this.state.status&&window.location.replace("/admin/dashboard"),a?r.a.createElement("div",{className:"pageContainer"},r.a.createElement(Be,null),r.a.createElement("p",{className:"message"},"Something went wrong. Error: ",a.message),";"):t?r.a.createElement("div",{className:"pageContainer"},r.a.createElement(Be,null),r.a.createElement("div",{className:"grid-container"},r.a.createElement("div",{className:"leftCol"},r.a.createElement("div",{className:"avatarBox-guest"},r.a.createElement("div",{className:"avatar-uploader"},r.a.createElement("img",{src:n,alt:"avatar",style:{width:"10rem",height:"10rem"}}))),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("div",{className:"rightCol"},r.a.createElement("div",{className:"profileHeadings"},"Profile"),r.a.createElement("div",{className:"profileInfo"},"Username:",r.a.createElement("div",{className:"currentInfo"},this.state.username)),r.a.createElement("div",{className:"nameInfo"},r.a.createElement("div",{className:"profileInfo"},"First name:",r.a.createElement("div",{className:"currentInfo"},this.state.firstname)),r.a.createElement("div",{className:"profileInfo"},"Last name:",r.a.createElement("div",{className:"currentInfo"},this.state.lastname))),r.a.createElement("div",{className:"profileInfo"},"Self Introduction:",r.a.createElement("div",{className:"intro"},this.state.description))))):r.a.createElement("div",{className:"pageContainer"},r.a.createElement(Be,null),r.a.createElement(F,null))}}]),a}(n.Component),He=M.a.Panel,Xe=window.location.pathname.split("/").pop(),Ze=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).showAllCate=function(){(function(e){return Je.apply(this,arguments)})({link:Xe}).then((function(e){return n.setState({files:e.res,isLoaded:!0})}))},n.enterLoading=function(e){n.setState((function(t){var a=t.loadings,n=Object(f.a)(a);return n[e]=!0,{loadings:n}})),setTimeout((function(){n.setState((function(t){var a=t.loadings,n=Object(f.a)(a);return n[e]=!1,{loadings:n}}))}),5e4)},n.state={files:{},loadings:[],isLoaded:!1},n.showAllCate=n.showAllCate.bind(Object(g.a)(n)),n.downloadAttachment=n.downloadAttachment.bind(Object(g.a)(n)),n.downloadFile=n.downloadFile.bind(Object(g.a)(n)),n}return Object(i.a)(a,[{key:"componentWillUnmount",value:function(){this.setState({files:{}}),console.log("clear")}},{key:"componentDidMount",value:function(){this.showAllCate(),console.log("loading")}},{key:"downloadFile",value:function(e){var t=e.content,a=document.getElementsByClassName("pageContainer")[0];if(a.hasChildNodes()){for(var n=a.childNodes,r=0;r<n.length;r++)console.log(n[r].nodeName),"OBJECT"===n[r].nodeName&&a.removeChild(n[r]);var l=document.createElement("a");l.style.cssFloat="right",l.download=e.filename,l.href="data:application/octet-stream;base64,"+t,a.appendChild(l).click()}this.setState({loadings:[]})}},{key:"viewFile",value:function(e){var t=e.content,a=e.filetype,n=document.getElementsByClassName("pageContainer")[0];if(n.hasChildNodes()){for(var r=n.childNodes,l=0;l<r.length;l++)if("OBJECT"===r[l].nodeName)n.removeChild(r[l]);else if("A"===r[l].nodeName){n.removeChild(r[l]);break}if("application/pdf"===a||"image/jpeg"===a||"image/png"===a||"text/plain"===a){var o=document.createElement("object");o.className="viewContainer","application/pdf"===a||"text/plain"===a?o.style.height="700px":(o.style.height="45%",o.style.maxHeight="650px",o.style.maxWidth="700px"),o.style.width="60%",o.style.cssFloat="center",o.type=a,o.data="data:"+a+";base64,"+t,n.appendChild(o)}else alert("Sorry, you are not allowed to view ".concat(a," files"));this.setState({loadings:[]})}}},{key:"downloadAttachment",value:function(e,t){var a=this;Ke(e).then((function(e){return a.downloadFile(e.res)})),this.enterLoading(t)}},{key:"viewAttachment",value:function(e,t){var a=this;Ke(e).then((function(e){return a.viewFile(e.res)})),this.enterLoading(t)}},{key:"render",value:function(){var e=this,t=this.state,a=t.files,n=t.loadings,l=t.isLoaded,o=[],s=new Map;for(var i in a){o.push(i);var c=[];for(var u in a[i])c.push(u);s.set(i,c)}return l?r.a.createElement("div",{className:"pageContainer"},r.a.createElement(Be,null),r.a.createElement("div",{className:"cateContainer"},r.a.createElement(M.a,{accordion:!0},o.map((function(t){return r.a.createElement(He,{header:"Category: "+t,key:t},r.a.createElement(M.a,{accordion:!0},s.get(t).map((function(l){return r.a.createElement(He,{header:"Artifact: "+l,key:l},r.a.createElement("div",{className:"CateInfo"},"Description:",r.a.createElement("div",{className:"currentInfo"},r.a.createElement("p",null,a[t][l][0]))),r.a.createElement("div",{className:"CateInfo"},"Attachments:",a[t][l].slice(1).map((function(o,s){return r.a.createElement("div",{key:s+1},r.a.createElement("div",{className:"currentAttachmentInfo"},r.a.createElement("p",null,o)),r.a.createElement(S.a,{loading:n[s+1],onClick:function(){return e.viewAttachment({link:Xe,category:t,artifact:l,attachment:o},s+1)},id:"downloadBtn",icon:r.a.createElement(K.a,null),size:"small"},"View"),r.a.createElement(S.a,{loading:n[s+a[t][l].length],onClick:function(){return e.downloadAttachment({link:Xe,category:t,artifact:l,attachment:o},s+a[t][l].length)},id:"downloadBtn",icon:r.a.createElement(z.a,null),size:"small"},"download"))})),r.a.createElement("br",null)))}))))}))))):r.a.createElement("div",{className:"pageContainer"},r.a.createElement(Be,null),r.a.createElement(F,null))}}]),a}(n.Component),Ye=a(166),_e=Object(Ye.a)(function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("email");null!=e&&(console.log(e),this.props.userStore.email=e,this.props.userStore.isLoggedIn=!0)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(d,null),r.a.createElement(A.a,null,r.a.createElement(Ee.d,null,r.a.createElement(Ee.b,{exact:!0,path:"/",render:function(e){return null!==localStorage.getItem("email")?r.a.createElement(Ee.a,{to:"/admin/dashboard"}):null!==localStorage.getItem("adminEmail")?r.a.createElement(Ee.a,{to:"/adminpage"}):r.a.createElement(Ee.a,{to:"/login"})}}),r.a.createElement(Ee.b,{exact:!0,path:"/login",render:function(t){return null!==localStorage.getItem("email")?r.a.createElement(Ee.a,{to:"/duplogin"}):r.a.createElement(Ce,{userStore:e.props.userStore})}}),r.a.createElement(Ee.b,{exact:!0,path:"/register",render:function(t){return null!==localStorage.getItem("email")?r.a.createElement(Ee.a,{to:"/login"}):r.a.createElement(je,{userStore:e.props.userStore})}}),r.a.createElement(Ee.b,{exact:!0,path:"/adminpage",render:function(t){return null!==localStorage.getItem("adminEmail")?r.a.createElement(Fe,{isLoggedIn:e.props.userStore.isLoggedIn,adminEmail:e.props.userStore.email,userStore:e.props.userStore}):null!==localStorage.getItem("email")?r.a.createElement(Ee.a,{to:"/admin/dashboard"}):r.a.createElement(Ee.a,{to:"/login"})}}),r.a.createElement(Ee.b,{exact:!0,path:"/admin",render:function(e){return r.a.createElement(Ee.a,{to:"/admin/dashboard"})}}),r.a.createElement(Ee.b,{exact:!0,path:"/admin/dashboard",render:function(t){return null!==localStorage.getItem("email")?r.a.createElement(q,{isLoggedIn:e.props.userStore.isLoggedIn,email:e.props.userStore.email,userStore:e.props.userStore}):null!==localStorage.getItem("adminEmail")?r.a.createElement(Ee.a,{to:"/adminpage"}):r.a.createElement(Ee.a,{to:"/login"})}}),r.a.createElement(Ee.b,{exact:!0,path:"/admin/category",render:function(t){return null!==localStorage.getItem("email")?r.a.createElement(re,{isLoggedIn:e.props.userStore.isLoggedIn,email:e.props.userStore.email,userStore:e.props.userStore}):null!==localStorage.getItem("adminEmail")?r.a.createElement(Ee.a,{to:"/adminpage"}):r.a.createElement(Ee.a,{to:"/login"})}}),r.a.createElement(Ee.b,{exact:!0,path:"/admin/article",render:function(t){return null!==localStorage.getItem("email")?r.a.createElement(ve,{isLoggedIn:e.props.userStore.isLoggedIn,email:e.props.userStore.email,userStore:e.props.userStore}):null!==localStorage.getItem("adminEmail")?r.a.createElement(Ee.a,{to:"/adminpage"}):r.a.createElement(Ee.a,{to:"/login"})}}),r.a.createElement(Ee.b,{exact:!0,path:"/duplogin",render:function(t){return null!==localStorage.getItem("email")?r.a.createElement(Le,{isLoggedIn:e.props.userStore.isLoggedIn,email:e.props.userStore.email,userStore:e.props.userStore}):r.a.createElement(Ee.a,{to:"/admin"})}}),r.a.createElement(Ee.b,{path:"/guest/dashboard/:link",render:function(e){return r.a.createElement(We,null)}}),r.a.createElement(Ee.b,{path:"/guest/category/:link",render:function(e){return r.a.createElement(Ze,null)}}))))}}]),a}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $e=a(9),et=function(){function e(){var t=this;Object(s.a)(this,e),this.isLoggedIn=!1,this.email="",this.user=null,Object($e.f)((function(){return console.log(t.report)}))}return Object(i.a)(e,[{key:"report",get:function(){return null!=localStorage.getItem("email")||null!=localStorage.getItem("adminEmail")?"Logged In!!!":"Not logged In :("}}]),e}();Object($e.j)(et,{isLoggedIn:$e.o,email:$e.o,user:$e.o,report:$e.g});var tt=new et;o.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(_e,{userStore:tt})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[170,1,2]]]);