(this.webpackJsonppiap=this.webpackJsonppiap||[]).push([[0],{164:function(e,t,a){e.exports=a.p+"static/media/empty.8d3e0a89.png"},186:function(e,t){e.exports="data:image/jpeg;base64,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"},191:function(e,t,a){e.exports=a(354)},196:function(e,t,a){},197:function(e,t,a){},354:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(28),o=a.n(l),s=(a(196),a(22)),i=a(23),c=a(30),u=a(29),m=(a(197),a(164)),d=a.n(m);function p(){return r.a.createElement("header",{className:"mainHeader"},r.a.createElement("div",{className:"headerContainer"},r.a.createElement("div",{className:"logoContainer"},r.a.createElement("img",{src:d.a,className:"logo",alt:"logo"})),r.a.createElement("div",{className:"messageContainer"},"Welcome to Fate e-portfolio")))}var h=a(80),f=a(41),g=a(31),v="https://fate-e-portfolio.herokuapp.com/",A=a(53),E=a(363),b=a(364),y=a(365),w=a(366);function N(){return r.a.createElement("nav",{className:"navbar"},r.a.createElement("h2",null,"\xa0\xa0\xa0\xa0"),r.a.createElement("h2",null,"\xa0\xa0\xa0\xa0"),r.a.createElement("ul",null,r.a.createElement("li",{className:"navOption"},r.a.createElement(A.b,{to:"/admin/dashboard",className:"current-page",activeClassName:"selected"},r.a.createElement(E.a,null)," Home"," ")),r.a.createElement("li",{className:"navOption"},r.a.createElement(A.b,{to:"/admin/article",className:"current-page",activeClassName:"selected"},r.a.createElement(b.a,null)," Artifact"," ")),r.a.createElement("li",{className:"navOption"},r.a.createElement(A.b,{to:"/admin/category",className:"current-page",activeClassName:"selected"},r.a.createElement(y.a,null)," Category"," ")),r.a.createElement("li",{className:"navOption"},r.a.createElement(A.b,{to:"#",onClick:function(){if(window.confirm("Are you sure to log out?")){var e="https://fate-e-portfolio.herokuapp.com/api/cache/clear/"+"".concat(localStorage.getItem("email"));fetch(e,{method:"GET"}),localStorage.clear(),window.location.replace("/login")}}},r.a.createElement(w.a,null)," Logout"," "))))}var S=a(362),k=a(356),x=a(86),C=a(367),O=a(368),I=a(6),j=a.n(I),L=a(20),P=v+"api/profile";function U(){return(U=Object(L.a)(j.a.mark((function e(t){var a,n,r,l,o,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.firstname,r=t.lastname,l=t.username,o=t.description,(s=new FormData).append("email",a),s.append("firstname",n),s.append("lastname",r),s.append("username",l),s.append("description",o),P+"/updateProfile",e.prev=8,e.next=11,fetch("https://fate-e-portfolio.herokuapp.com/api/profile/updateProfile",{method:"POST",body:s});case 11:i=e.sent,e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(8),console.log(e.t0),e.abrupt("return",{error:e.t0});case 18:return e.next=20,i.status;case 20:return e.t1=e.sent,e.next=23,i.json();case 23:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 25:case"end":return e.stop()}}),e,null,[[8,14]])})))).apply(this,arguments)}function F(){return(F=Object(L.a)(j.a.mark((function e(t){var a,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,P+"/viewprofile",(n=new FormData).append("email",a),e.prev=4,e.next=7,fetch("https://fate-e-portfolio.herokuapp.com/api/profile/viewprofile",{method:"POST",body:n});case 7:r=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.log(e.t0),e.abrupt("return",{error:e.t0});case 14:return e.next=16,r.status;case 16:return e.t1=e.sent,e.next=19,r.json();case 19:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 21:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}function T(){return(T=Object(L.a)(j.a.mark((function e(t){var a,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,P+"/generate-link",(n=new FormData).append("email",a),e.prev=4,e.next=7,fetch("https://fate-e-portfolio.herokuapp.com/api/profile/generate-link",{method:"POST",body:n});case 7:r=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.log(e.t0),e.abrupt("return",{error:e.t0});case 14:return e.next=16,r.status;case 16:return e.t1=e.sent,e.next=19,r.text();case 19:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 21:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}var D=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"loadingBox"},r.a.createElement("div",{className:"monstertext"},r.a.createElement("h2",null,"Hello"),r.a.createElement("h3",null,"Please wait...")),r.a.createElement("div",{className:"monster"},r.a.createElement("div",{className:"eye"},r.a.createElement("div",{className:"eyeball"})),r.a.createElement("div",{className:"mouth"})),r.a.createElement("div",{className:"monster blue"},r.a.createElement("div",{className:"eye"},r.a.createElement("div",{className:"eyeball"})),r.a.createElement("div",{className:"mouth"})),r.a.createElement("div",{className:"monster red"},r.a.createElement("div",{className:"eye"},r.a.createElement("div",{className:"eyeball"})),r.a.createElement("div",{className:"mouth"})))}}]),a}(n.Component),B=v+"api/profile/updateAvatar";function q(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||S.b.error("You can only upload JPG/PNG file!");var a=e.size/1024/1024<1;return a||S.b.error("Image must smaller than 1MB!"),t&&a}var M=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e){"uploading"!==e.file.status?"done"===e.file.status&&(!function(e,t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)})),a.readAsDataURL(e)}(e.file.originFileObj,(function(e){return n.setState({imageUrl:e,loading:!1})})),console.log("done!")):n.setState({loading:!0})},n.changeEdit=function(){n.setState({ifEdit:!0})},n.enterLoading=function(e){n.setState((function(t){var a=t.loadings,n=Object(f.a)(a);return n[e]=!0,{loadings:n}})),setTimeout((function(){n.setState((function(t){var a=t.loadings,n=Object(f.a)(a);return n[e]=!1,{loadings:n}}))}),12e3)},n.state={userInfo:null,username:"",firstname:"",lastname:"",description:"",isLoaded:!1,error:null,loading:!1,imageUrl:null,ifEdit:!1,status:!1,loadings:[],shareLink:""},n.handleChange=n.handleChange.bind(Object(g.a)(n)),n.changeEdit=n.changeEdit.bind(Object(g.a)(n)),n.handleUpdate=n.handleUpdate.bind(Object(g.a)(n)),n.submitProfile=n.submitProfile.bind(Object(g.a)(n)),n.getShareLink=n.getShareLink.bind(Object(g.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.fetchInfo(localStorage.getItem("email"))}},{key:"handleUpdate",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(h.a)({},n,a))}},{key:"submitProfile",value:function(e){var t=this,a=e.firstname,n=e.lastname,r=e.username,l=e.description;this.enterLoading(0),0===a.length||0===n.length||0===r.length?alert("name cannot be empty"):function(e){return U.apply(this,arguments)}({email:localStorage.getItem("email"),firstname:a,lastname:n,username:r,description:l}).then((function(e){return t.setState({status:e.res.result})}))}},{key:"fetchInfo",value:function(e){var t=this;(function(e){return F.apply(this,arguments)})({email:e}).then((function(e){return t.setState({userInfo:e,isLoaded:!0,username:e.res.username,loading:!1,firstname:e.res.firstname,lastname:e.res.lastname,description:e.res.description,imageUrl:t.setImage(e.res.avatar),shareLink:e.res.link})}))}},{key:"setImage",value:function(e){if(null!==e){var t=e.image.data;return"data:"+e.imageType+";base64,"+t}return null}},{key:"getShareLink",value:function(){window.confirm("Are you sure to replace your previous link with a new link?")&&(function(e){return T.apply(this,arguments)}({email:localStorage.getItem("email")}).then((function(e){return e.res})),window.location.replace("/admin/dashboard"))}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoaded,n=t.firstname,l=t.lastname,o=t.username,s=t.description,i=t.error,c=t.loading,u=t.imageUrl,m=t.ifEdit,d=t.loadings;if(!0===this.state.status&&window.location.replace("/admin/dashboard"),i)return r.a.createElement("div",{className:"pageContainer"},r.a.createElement(N,null),r.a.createElement("p",{className:"message"},"Something went wrong. Error: ",i.message),";");if(a){var p=r.a.createElement("div",{className:"uploadButton"},c?r.a.createElement(C.a,null):r.a.createElement(O.a,null),r.a.createElement("div",{className:"uploadInfo"},"Upload"));return m?r.a.createElement("div",{className:"pageContainer"},r.a.createElement(N,null),r.a.createElement("div",{className:"grid-container"},r.a.createElement("div",{className:"leftCol"},r.a.createElement("div",{className:"avatarBox"},r.a.createElement(k.a,{name:"image",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:B+"/".concat(localStorage.getItem("email")),beforeUpload:q,onChange:this.handleChange},u?r.a.createElement("img",{src:u,alt:"avatar",style:{width:"10rem",height:"10rem"}}):p)),r.a.createElement("div",{className:"editButtonBox"},r.a.createElement("div",{className:"avatarMessage"},"Click the image to update your avatar"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(x.a,{block:!0,disabled:!0},"Edit Profile"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(x.a,{block:!0,disabled:!0},"Generate a new share link"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(x.a,{block:!0,value:"default",loading:d[0],onClick:function(){return e.submitProfile({firstname:n,lastname:l,username:o,description:s})}},"Update"))),r.a.createElement("div",{className:"rightCol"},r.a.createElement("div",{className:"profileHeadings"},"Profile"),r.a.createElement("div",{className:"profileInfo"},"Email:",r.a.createElement("div",{className:"currentInfo"},localStorage.getItem("email"))),r.a.createElement("div",{className:"profileInfo"},"Username:",r.a.createElement("div",{className:"currentInfo"},r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleUpdate,required:!0}))),r.a.createElement("div",{className:"nameInfo"},r.a.createElement("div",{className:"profileInfo"},"First name:",r.a.createElement("div",{className:"currentInfo"},r.a.createElement("input",{type:"text",name:"firstname",value:this.state.firstname,onChange:this.handleUpdate,required:!0}))),r.a.createElement("div",{className:"profileInfo"},"Last name:",r.a.createElement("div",{className:"currentInfo"},r.a.createElement("input",{type:"text",name:"lastname",value:this.state.lastname,onChange:this.handleUpdate,required:!0})))),r.a.createElement("div",{className:"profileInfo"},"Self Introduction:",r.a.createElement("div",{className:"currentInfo"},r.a.createElement("textarea",{type:"text",name:"description",rows:"2",cols:"50",maxLength:"200",value:this.state.description,onChange:this.handleUpdate,required:!0}))),r.a.createElement("div",{className:"profileInfo"},"Sharable Link:",r.a.createElement("div",{className:"currentInfo"},r.a.createElement("a",{href:"http://localhost:3000/guest/dashboard/"+this.state.shareLink},"http://localhost:3000/guest/dashboard/"+this.state.shareLink)))))):r.a.createElement("div",{className:"pageContainer"},r.a.createElement(N,null),r.a.createElement("div",{className:"grid-container"},r.a.createElement("div",{className:"leftCol"},r.a.createElement("div",{className:"avatarBox"},r.a.createElement(k.a,{name:"image",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:B+"/".concat(localStorage.getItem("email")),beforeUpload:q,onChange:this.handleChange},r.a.createElement("div",{className:"curAvatar"},u?r.a.createElement("img",{src:u,alt:"avatar",style:{width:"10rem",height:"10rem"}}):p))),r.a.createElement("div",{className:"editButtonBox"},r.a.createElement("div",{className:"avatarMessage"},"Click the image to update your avatar"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(x.a,{block:!0,onClick:this.changeEdit},"Edit Profile"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(x.a,{block:!0,onClick:this.getShareLink},"Generate a new share link"))),r.a.createElement("div",{className:"rightCol"},r.a.createElement("div",{className:"profileHeadings"},"Profile"),r.a.createElement("div",{className:"profileInfo"},"Email:",r.a.createElement("div",{className:"currentInfo"},localStorage.getItem("email"))),r.a.createElement("div",{className:"profileInfo"},"Username:",r.a.createElement("div",{className:"currentInfo"},this.state.username)),r.a.createElement("div",{className:"nameInfo"},r.a.createElement("div",{className:"profileInfo"},"First name:",r.a.createElement("div",{className:"currentInfo"},this.state.firstname)),r.a.createElement("div",{className:"profileInfo"},"Last name:",r.a.createElement("div",{className:"currentInfo"},this.state.lastname))),r.a.createElement("div",{className:"profileInfo"},"Self Introduction:",r.a.createElement("div",{className:"intro"},this.state.description)),r.a.createElement("div",{className:"profileInfo"},"Sharable Link:",r.a.createElement("div",{className:"currentInfo"},r.a.createElement("a",{href:"http://localhost:3000/guest/dashboard/"+this.state.shareLink},"http://localhost:3000/guest/dashboard/"+this.state.shareLink))))))}return r.a.createElement("div",{className:"pageContainer"},r.a.createElement(N,null),r.a.createElement(D,null))}}]),a}(n.Component),R=a(359),J=a(369),K=a(370),z=a(371),G=a(372),Q=v+"api/artifacts";function V(){return(V=Object(L.a)(j.a.mark((function e(t){var a,n,r,l,o,s,i,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.category,r=t.title,l=t.description,o=t.attachment,s=t.privacy,(i=new FormData).append("email",a),i.append("category",n),i.append("title",r),i.append("description",l),i.append("attachment",o),i.append("privacy",s),Q+"/upload",e.prev=9,e.next=12,fetch("https://fate-e-portfolio.herokuapp.com/api/artifacts/upload",{method:"POST",body:i});case 12:c=e.sent,e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(9),console.log(e.t0),e.abrupt("return",{error:e.t0});case 19:return e.next=21,c.status;case 21:return e.t1=e.sent,e.next=24,c.json();case 24:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 26:case"end":return e.stop()}}),e,null,[[9,15]])})))).apply(this,arguments)}function H(e){return W.apply(this,arguments)}function W(){return(W=Object(L.a)(j.a.mark((function e(t){var a,n,r,l,o,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.category,r=t.artifact,l=t.privacy,Q+"/change-privacy",(o=new FormData).append("email",a),o.append("category",n),o.append("artifact",r),o.append("privacy",l),e.prev=7,e.next=10,fetch("https://fate-e-portfolio.herokuapp.com/api/artifacts/change-privacy",{method:"POST",body:o});case 10:s=e.sent,e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(7),console.log(e.t0),e.abrupt("return",{error:e.t0});case 17:return e.next=19,s.status;case 19:return e.t1=e.sent,e.next=22,s.json();case 22:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 24:case"end":return e.stop()}}),e,null,[[7,13]])})))).apply(this,arguments)}function X(){return(X=Object(L.a)(j.a.mark((function e(t){var a,n,r,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.category,r=t.artifact,Q+"/delete-artifact",e.prev=2,e.next=5,fetch("https://fate-e-portfolio.herokuapp.com/api/artifacts/delete-artifact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,category:n,artifact:r})});case 5:l=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",{error:e.t0});case 12:return e.next=14,l.status;case 14:return e.t1=e.sent,e.next=17,l.json();case 17:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 19:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function Z(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(L.a)(j.a.mark((function e(t){var a,n,r,l,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.category,r=t.artifact,l=t.attachment,Q+"/get-attachment",e.prev=2,e.next=5,fetch("https://fate-e-portfolio.herokuapp.com/api/artifacts/get-attachment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,category:n,artifact:r,attachment:l})});case 5:o=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",{error:e.t0});case 12:return e.next=14,o.status;case 14:return e.t1=e.sent,e.next=17,o.json();case 17:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 19:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function _(){return(_=Object(L.a)(j.a.mark((function e(t){var a,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,Q+"/show-Category-Artifact-Attachment",(n=new FormData).append("email",a),e.prev=4,e.next=7,fetch("https://fate-e-portfolio.herokuapp.com/api/artifacts/show-Category-Artifact-Attachment",{method:"POST",body:n});case 7:r=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.log(e.t0),e.abrupt("return",{error:e.t0});case 14:return e.next=16,r.status;case 16:return e.t1=e.sent,e.next=19,r.json();case 19:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 21:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}var $=v+"api/categories";function ee(){return(ee=Object(L.a)(j.a.mark((function e(t){var a,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.categoryName,$+"/addCategory",e.prev=2,e.next=5,fetch("https://fate-e-portfolio.herokuapp.com/api/categories/addCategory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,categoryName:n})});case 5:r=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",{error:e.t0});case 12:return e.next=14,r.status;case 14:return e.t1=e.sent,e.next=17,r.json();case 17:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 19:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function te(){return(te=Object(L.a)(j.a.mark((function e(t){var a,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.categoryName,$+"/deleteCategory",e.prev=2,e.next=5,fetch("https://fate-e-portfolio.herokuapp.com/api/categories/deleteCategory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,categoryName:n})});case 5:r=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",{error:e.t0});case 12:return e.next=14,r.status;case 14:return e.t1=e.sent,e.next=17,r.json();case 17:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 19:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function ae(e){return ne.apply(this,arguments)}function ne(){return(ne=Object(L.a)(j.a.mark((function e(t){var a,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,$+"/showCategories",(r=new FormData).append("email",a),e.prev=4,e.next=7,fetch("https://fate-e-portfolio.herokuapp.com/api/categories/showCategories",{method:"POST",body:r});case 7:n=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.log(e.t0),e.abrupt("return",{error:e.t0});case 14:return e.next=16,n.status;case 16:return e.t1=e.sent,e.next=19,n.json();case 19:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 21:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}var re=R.a.Panel,le=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).showAllCate=function(){(function(e){return _.apply(this,arguments)})({email:localStorage.getItem("email")}).then((function(e){return n.setState({files:e.res,isLoaded:!0})}))},n.enterLoading=function(e){n.setState((function(t){var a=t.loadings,n=Object(f.a)(a);return n[e]=!0,{loadings:n}})),setTimeout((function(){n.setState((function(t){var a=t.loadings,n=Object(f.a)(a);return n[e]=!1,{loadings:n}}))}),5e4)},n.state={files:{},loadings:[],isLoaded:!1},n.showAllCate=n.showAllCate.bind(Object(g.a)(n)),n.downloadAttachment=n.downloadAttachment.bind(Object(g.a)(n)),n.downloadFile=n.downloadFile.bind(Object(g.a)(n)),n}return Object(i.a)(a,[{key:"componentWillUnmount",value:function(){this.setState({files:{}}),console.log("clear")}},{key:"componentDidMount",value:function(){this.showAllCate(),console.log("loading")}},{key:"deleteCate",value:function(e){window.confirm("Are you sure to delete "+e.categoryName+"?")&&function(e){return te.apply(this,arguments)}(e).then((function(e){return window.location.replace("/admin/category")}))}},{key:"deleteArti",value:function(e){window.confirm("Are you sure to delete "+e.artifact+"?")&&function(e){return X.apply(this,arguments)}(e).then((function(e){return window.location.replace("/admin/category")}))}},{key:"changePrivacy",value:function(e){"public"===e.privacy?window.confirm("Are you sure to change public to private?")&&H({email:localStorage.getItem("email"),category:e.category,artifact:e.artifact,privacy:"private"}).then((function(e){return window.location.replace("/admin/category")})):window.confirm("Are you sure to change private to public?")&&H({email:localStorage.getItem("email"),category:e.category,artifact:e.artifact,privacy:"public"}).then((function(e){return window.location.replace("/admin/category")}))}},{key:"downloadFile",value:function(e){var t=e.content,a=document.createElement("a");a.download=e.filename,a.href="data:application/octet-stream;base64,"+t,a.click(),this.setState({loadings:[]})}},{key:"viewFile",value:function(e){var t=e.content,a=e.filetype,n=document.getElementsByClassName("pageContainerCate")[0];if(void 0===n)console.log("Loading finished!foo undefine");else{if(n.hasChildNodes()){for(var r=n.childNodes,l=0;l<r.length;l++)"OBJECT"===r[l].nodeName&&n.removeChild(r[l]);if("application/pdf"===a||"image/jpeg"===a||"image/png"===a||"text/plain"===a){var o=document.createElement("object");o.className="viewContainer","application/pdf"===a||"text/plain"===a?o.style.height="700px":(o.style.height="45%",o.style.maxHeight="650px",o.style.maxWidth="700px"),o.style.width="60%",o.style.cssFloat="center",o.type=a,o.data="data:"+a+";base64,"+t,n.appendChild(o)}else alert("Sorry, you are not allowed to view ".concat(a," files"));this.setState({loadings:[]})}console.log("Loading finished!")}}},{key:"downloadAttachment",value:function(e,t){var a=this;Z(e).then((function(e){return a.downloadFile(e.res)})),this.enterLoading(t)}},{key:"viewAttachment",value:function(e,t){var a=this;Z(e).then((function(e){return a.viewFile(e.res)})),this.enterLoading(t)}},{key:"render",value:function(){var e=this,t=this.state,a=t.files,n=t.loadings,l=t.isLoaded,o=[],s=new Map;for(var i in a){o.push(i);var c=[];for(var u in a[i])c.push(u);s.set(i,c)}return l?r.a.createElement("div",{className:"pageContainerCate"},r.a.createElement(N,null),r.a.createElement("div",{className:"cateContainer"},r.a.createElement(R.a,{accordion:!0},o.map((function(t,l){return r.a.createElement(re,{header:"Category: "+t,key:t,extra:r.a.createElement(J.a,{onClick:function(){return e.deleteCate({email:localStorage.getItem("email"),categoryName:t})}})},r.a.createElement(R.a,{accordion:!0},s.get(t).map((function(i,c){return r.a.createElement(re,{header:"Artifact: "+i,key:i,extra:r.a.createElement(J.a,{onClick:function(){return e.deleteArti({email:localStorage.getItem("email"),category:t,artifact:i})}})},r.a.createElement("div",{className:"CateInfo"},"Description:",r.a.createElement("div",{className:"currentInfo"},r.a.createElement("p",null,a[t][i][0]))),r.a.createElement("div",{className:"CateInfo"},"Current Privacy State:",r.a.createElement("div",{className:"currentInfo"},a[t][i][1])),r.a.createElement(x.a,{loading:n[4],onClick:function(){return e.changePrivacy({email:localStorage.getItem("email"),category:t,artifact:i,privacy:a[t][i][1]})},icon:r.a.createElement(K.a,null)},"public"===a[t][i][1]?"Switch to private":"Switch to public"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"CateInfo"},"Attachments:",a[t][i].slice(2).map((function(u,m){return r.a.createElement("div",{key:l*o.length+c*s.get(t).length+m+5},r.a.createElement("div",{className:"currentAttachmentInfo"},r.a.createElement("div",null,u),r.a.createElement(x.a,{loading:n[l*o.length+c*s.get(t).length+m+5],onClick:function(){return e.viewAttachment({email:localStorage.getItem("email"),category:t,artifact:i,attachment:u},l*o.length+c*s.get(t).length+m+5)},id:"downloadBtn",icon:r.a.createElement(z.a,null),size:"small"},"View"),r.a.createElement(x.a,{loading:n[o.length*s.get(t).length*a[t][i].length+l*o.length+c*s.get(t).length+m*a[t][i].length+5],onClick:function(){return e.downloadAttachment({email:localStorage.getItem("email"),category:t,artifact:i,attachment:u},o.length*s.get(t).length*a[t][i].length+l*o.length+c*s.get(t).length+m*a[t][i].length+5)},id:"downloadBtn",icon:r.a.createElement(G.a,null),size:"small"},"download")))})),r.a.createElement("br",null)))}))))}))))):r.a.createElement("div",{className:"pageContainer"},r.a.createElement(N,null),r.a.createElement(D,null))}}]),a}(n.Component),oe=a(97),se=a(357),ie=a(360),ce=a(355),ue=a(361),me=(a(242),a(373)),de=a(181),pe=a.n(de),he=oe.a.Option,fe=k.a.Dragger,ge=0,ve={labelCol:{span:6},wrapperCol:{span:14}},Ae=[],Ee=v+"api/cache/upload",be={name:"file",multiple:!0,action:Ee+"/".concat(localStorage.getItem("email")),onChange:function(e){var t=e.file.status;"uploading"!==t&&(Ae=e.fileList),"done"===t?(Ae=e.fileList,S.b.success("".concat(e.file.name," file uploaded successfully."))):"error"===t&&S.b.error("".concat(e.file.name," file upload failed."))}},ye=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).categories=ae({email:localStorage.getItem("email")}).then((function(e){return n.setState({items:e.res.categories})})),n.onNameChange=function(e){n.setState({name:e.target.value,value:e.target.value})},n.onCategoryChange=function(e){n.setState({name:e})},n.loadAllcates=function(){ae({email:localStorage.getItem("email")}).then((function(e){return n.setState({items:e.res.categories})}))},n.onTitleChange=function(e){n.setState({title:e.target.value})},n.onDescriptionChange=function(e){n.setState({description:e.target.value})},n.onPrivacyChange=function(e){n.setState({privacy:e.target.value})},n.addItem=function(){var e=n.state,t=e.items,a=e.name,r=e.value;-1===t.indexOf(r)?(n.setState({items:[].concat(Object(f.a)(t),[a||"New item ".concat(ge++)]),name:"",value:""}),function(e){ee.apply(this,arguments)}({email:localStorage.getItem("email"),categoryName:a})):alert("Category exists")},n.uploadFiles=function(){var e;n.enterLoading(0);var t=[];for(e=0;e<Ae.length;e++)t.push(Ae[e].name);""===n.state.title?alert("Title cannot be empty"):""===n.state.privacy?alert("Please choose privary"):function(e){return V.apply(this,arguments)}({email:localStorage.getItem("email"),category:n.state.name,title:n.state.title,description:n.state.description,attachment:t,privacy:n.state.privacy}).then((function(e){return n.checkArti(e.res)}))},n.enterLoading=function(e){n.setState((function(t){var a=t.loadings,n=Object(f.a)(a);return n[e]=!0,{loadings:n}})),setTimeout((function(){n.setState((function(t){var a=t.loadings,n=Object(f.a)(a);return n[e]=!1,{loadings:n}}))}),3e3)},n.state={value:"",items:[],name:"",title:"",description:"",privacy:"",loadings:[]},n}return Object(i.a)(a,[{key:"componentWillUnmount",value:function(){this.setState({value:"",items:[],name:"",title:"",description:"",privacy:"",loadings:[]}),console.log("clear artifact")}},{key:"componentDidMount",value:function(){this.setState({value:"",items:[],name:"",title:"",description:"",privacy:"",loadings:[]}),this.loadAllcates(),console.log("load artifact")}},{key:"checkArti",value:function(e){e.result?window.location.replace("/admin/dashboard"):alert(e.reason)}},{key:"render",value:function(){var e=this,t=this.state,a=t.items,n=t.title,l=t.description,o=t.value,s=t.loadings;return be.action===Ee+"/null"&&window.location.replace("/admin/article"),r.a.createElement("div",{className:"pageContainer"},r.a.createElement(N,null),r.a.createElement(se.a,Object.assign({name:"validate_other"},ve),r.a.createElement(se.a.Item,null,r.a.createElement("div",{id:"header"},r.a.createElement("br",null),r.a.createElement("br",null),"Upload Document")),r.a.createElement(se.a.Item,{label:r.a.createElement("label",{className:"variables"},"Title"),required:!0},r.a.createElement(ie.a,{placeholder:"Enter Title",style:{flex:"auto"},value:n,onChange:this.onTitleChange})),r.a.createElement(se.a.Item,{label:r.a.createElement("label",{className:"variables"},"Description")},r.a.createElement(pe.a,{placeholder:"Enter Description",style:{flex:"auto"},value:l,onChange:this.onDescriptionChange})),r.a.createElement(se.a.Item,{label:r.a.createElement("label",{className:"variables"},"Select the category"),required:!0},r.a.createElement(oe.a,{onChange:this.onCategoryChange,style:{width:240},placeholder:"add new category",dropdownRender:function(t){return r.a.createElement("div",null,t,r.a.createElement(ce.a,{style:{margin:"4px 0"}}),r.a.createElement("div",{style:{display:"flex",flexWrap:"nowrap",padding:8}},r.a.createElement(ie.a,{value:o,style:{flex:"auto"},onChange:e.onNameChange}),r.a.createElement("button",{className:"cateButton",onClick:e.addItem}," Add ")))}},a.map((function(e){return r.a.createElement(he,{key:e},e)})))),r.a.createElement(se.a.Item,{name:"radio-group",label:r.a.createElement("label",{className:"variables"},"Privacy"),required:!0},r.a.createElement(ue.a.Group,null,r.a.createElement(ue.a,{value:"public",onChange:this.onPrivacyChange},r.a.createElement("label",{className:"privacy"}," Public ")),r.a.createElement(ue.a,{value:"private",onChange:this.onPrivacyChange},r.a.createElement("label",{className:"privacy"}," Private ")))),r.a.createElement(se.a.Item,{label:r.a.createElement("label",{className:"variables"},"Dragger")},r.a.createElement(fe,be,r.a.createElement("p",{className:"ant-upload-drag-icon"},r.a.createElement(me.a,null)),r.a.createElement("p",{className:"ant-upload-text"},"Click or drag file to this area to upload"),r.a.createElement("p",{className:"ant-upload-hint"},"Support for a single or bulk upload. Strictly prohibit from uploading company data or other band files"))),r.a.createElement(se.a.Item,{wrapperCol:{span:12,offset:6}},r.a.createElement("p",null," ","Note: You can upload several files, but the size of each file must be less than 1 MB."," "),r.a.createElement(x.a,{value:"default",loading:s[0],onClick:this.uploadFiles},"Submit"))))}}]),a}(n.Component),we=a(70),Ne=v+"api/account";function Se(e){return ke.apply(this,arguments)}function ke(){return(ke=Object(L.a)(j.a.mark((function e(t){var a,n,r,l,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.email,n=t.password,r=Ne+"/login",(l=new FormData).append("email",a),l.append("password",n),a){e.next=8;break}return alert("please enter your email"),e.abrupt("return");case 8:if(n){e.next=11;break}return alert("please enter your password"),e.abrupt("return");case 11:return e.prev=11,e.next=14,fetch(r,{method:"POST",body:l});case 14:o=e.sent,e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(11),console.log(e.t0),e.abrupt("return",{error:e.t0});case 21:return e.t1=o.status,e.next=24,o.json();case 24:return e.t2=e.sent,e.abrupt("return",{status:e.t1,user:e.t2});case 26:case"end":return e.stop()}}),e,null,[[11,17]])})))).apply(this,arguments)}function xe(e){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(L.a)(j.a.mark((function e(t){var a,n,r,l,o,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.first_name,n=t.last_name,r=t.email,l=t.username,o=t.password,s=t.studentId,Ne+"/register",e.prev=2,e.next=5,fetch("https://fate-e-portfolio.herokuapp.com/api/account/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstname:a,lastname:n,studentId:s,emailaddress:r,username:l,password:o})});case 5:i=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",{error:e.t0});case 12:return e.t1=i.status,e.next=15,i.json();case 15:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 17:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}var Oe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={email:"",password:"",wrongAttempt:!1},n.handleChange=n.handleChange.bind(Object(g.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(g.a)(n)),n}return Object(i.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(h.a)({},n,a))}},{key:"handleSubmit",value:function(){var e=Object(L.a)(j.a.mark((function e(t){var a,n,r,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Se({email:this.state.email,password:this.state.password});case 3:a=e.sent,n=a.status,r=a.user,200===n&&(this.setState({wrongAttempt:!1}),r.result?"User"===r.reason?(this.props.userStore.isLoggedIn=!0,this.props.userStore.email=this.state.email,localStorage.setItem("email",this.state.email),l="https://fate-e-portfolio.herokuapp.com/api/cache/clear/"+"".concat(localStorage.getItem("email")),fetch(l,{method:"GET"}),this.props.history.push("/admin/dashboard")):(this.props.userStore.isLoggedIn=!0,localStorage.setItem("adminEmail",this.state.email),this.props.history.push("/adminpage")):this.setState({wrongAttempt:!0}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h1",null,"Log In"),r.a.createElement("div",{className:"formDisplay"},r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Email",type:"text",name:"email",value:this.state.email,onChange:this.handleChange,required:!0})),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange,required:!0})),r.a.createElement("div",{className:"subTitle"},"Don't have an account? ",r.a.createElement("a",{href:"/register"},"Register")),r.a.createElement("br",null),this.state.wrongAttempt?r.a.createElement("div",{className:"formError"},"Please check your email and password"):null,r.a.createElement("input",{type:"submit",value:"Log In"})))}}]),a}(r.a.Component),Ie=Object(we.g)(Oe);function je(e){return r.a.createElement("div",{className:"wrap"},r.a.createElement("div",{className:"container"},r.a.createElement(Ie,{userStore:e.userStore})),r.a.createElement("ul",null,r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null)))}var Le=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={first_name:"",last_name:"",email:"",studentId:"",username:"",password:"",password_confirm:"",result:!1,success:!1,res:""},n.handleChange=n.handleChange.bind(Object(g.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(g.a)(n)),n}return Object(i.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(h.a)({},n,a))}},{key:"handleSubmit",value:function(){var e=Object(L.a)(j.a.mark((function e(t){var a,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(this.state.password.length<6)){e.next=4;break}return alert("Password should not be less than 6 characters"),e.abrupt("return");case 4:if(this.state.password===this.state.password_confirm){e.next=7;break}return alert("Inconsistent password"),e.abrupt("return");case 7:return e.next=9,xe({first_name:this.state.first_name,last_name:this.state.last_name,studentId:this.state.studentId,email:this.state.email,username:this.state.username,password:this.state.password,password_confirm:this.state.password_confirm});case 9:a=e.sent,n=a.status,(r=a.res).result?this.setState({success:200===n,res:r}):alert(r.reason),this.state.success&&this.props.history.push("/login");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h1",null,"Register"),r.a.createElement("div",{className:"subTitle"},"Already have an account? ",r.a.createElement("a",{href:"/"},"Log in")),r.a.createElement("div",{className:"float"},r.a.createElement("div",{className:"floatLeft"},r.a.createElement("div",{className:"floatTop"},r.a.createElement("input",{placeholder:"Email",type:"email",name:"email",value:this.state.email,onChange:this.handleChange,required:!0})),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"First name",type:"text",name:"first_name",value:this.state.first_name,onChange:this.handleChange,required:!0})),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Last name",type:"text",name:"last_name",value:this.state.last_name,onChange:this.handleChange,required:!0})),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Student ID",type:"text",name:"studentId",value:this.state.studentId,onChange:this.handleChange,required:!0}))),r.a.createElement("div",{className:"floatRight"},r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Username",type:"text",name:"username",value:this.state.username,onChange:this.handleChange,required:!0})),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange,required:!0})),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Confirm password",type:"password",name:"password_confirm",value:this.state.password_confirm,onChange:this.handleChange,required:!0})),!this.state.success&&r.a.createElement("div",{className:"formError"},this.state.res),r.a.createElement("input",{type:"submit",value:"Register"}))))}}]),a}(r.a.Component),Pe=Object(we.g)(Le);function Ue(){return r.a.createElement("div",{className:"wrap"},r.a.createElement("div",{className:"regContainer"},r.a.createElement(Pe,null)),r.a.createElement("div",{className:"wrapBubble"},r.a.createElement("ul",null,r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null))))}var Fe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"pageContainer"},r.a.createElement(N,null),r.a.createElement("div",null,"Your have already login, please log out to switch the account."))}}]),a}(n.Component),Te=a(358);function De(){return(De=Object(L.a)(j.a.mark((function e(t){var a,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.info,"https://fate-e-portfolio.herokuapp.com/api/search/show",(n=new FormData).append("info",a),e.prev=4,e.next=7,fetch("https://fate-e-portfolio.herokuapp.com/api/search/show",{method:"POST",body:n});case 7:r=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.log(e.t0),e.abrupt("return",{error:e.t0});case 14:return e.next=16,r.status;case 16:return e.t1=e.sent,e.next=19,r.json();case 19:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 21:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}var Be=ie.a.Search,qe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).searchUser=function(e){n.enterLoading(0),function(e){return De.apply(this,arguments)}({info:e}).then((function(e){n.setState({data:e.res,loadings:[]})}))},n.enterLoading=function(e){n.setState((function(t){var a=t.loadings,n=Object(f.a)(a);return n[e]=!0,{loadings:n}})),setTimeout((function(){n.setState((function(t){var a=t.loadings,n=Object(f.a)(a);return n[e]=!1,{loadings:n}}))}),1e4)},n.logout=function(){window.confirm("Are you sure to log out?")&&(localStorage.clear(),window.location.replace("/login"))},n.state={initLoading:!0,loadings:[],data:{}},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.loadings,l=[];for(var o in a)l.push(o);return r.a.createElement("div",null,r.a.createElement("div",{className:"adminButton"},r.a.createElement(x.a,{onClick:this.logout},"Logout"," ")),r.a.createElement("br",null),r.a.createElement("div",{className:"adminTitle"},"Fate e-Portfolio"),r.a.createElement("div",{className:"adminSearch"},r.a.createElement(Be,{placeholder:"search users",onSearch:function(t){return e.searchUser(t)},loading:n[0],enterButton:!0})),r.a.createElement("br",null),r.a.createElement("div",{className:"adminList"},r.a.createElement(Te.b,{itemLayout:"horizontal",dataSource:l,renderItem:function(e){return r.a.createElement(Te.b.Item,{className:"adminUser"},r.a.createElement(Te.b.Item.Meta,{title:r.a.createElement("a",{href:"http://localhost:3000/guest/dashboard/"+a[e][4]},a[e][1]),description:a[e][2]+" "+a[e][3]+", "+a[e][0]}))}})),r.a.createElement("br",null))}}]),a}(r.a.Component),Me=window.location.pathname.split("/").pop();function Re(){return r.a.createElement("nav",{className:"navbar"},r.a.createElement("h2",null,"\xa0\xa0\xa0\xa0"),r.a.createElement("h2",null,"\xa0\xa0\xa0\xa0"),r.a.createElement("ul",null,r.a.createElement("li",{className:"navOption"},r.a.createElement(A.b,{to:"/guest/dashboard/"+Me,className:"current-page",activeClassName:"selected"},r.a.createElement(E.a,null),"Home"," ")),r.a.createElement("li",{className:"navOption"},r.a.createElement(A.b,{to:"/guest/category/"+Me,className:"current-page",activeClassName:"selected"},r.a.createElement(y.a,null),"Category"," "))))}var Je=v+"api/guest",Ke=v+"api/artifacts";function ze(){return(ze=Object(L.a)(j.a.mark((function e(t){var a,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.link,Je+"/showUserProfile",(n=new FormData).append("link",a),e.prev=4,e.next=7,fetch("https://fate-e-portfolio.herokuapp.com/api/guest/showUserProfile",{method:"POST",body:n});case 7:r=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.log(e.t0),e.abrupt("return",{error:e.t0});case 14:return e.prev=14,e.next=17,r.status;case 17:return e.t1=e.sent,e.next=20,r.json();case 20:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 24:return e.prev=24,e.t3=e.catch(14),e.abrupt("return",void 0);case 27:case"end":return e.stop()}}),e,null,[[4,10],[14,24]])})))).apply(this,arguments)}function Ge(){return(Ge=Object(L.a)(j.a.mark((function e(t){var a,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.link,Je+"/showUserPublic",(n=new FormData).append("link",a),e.prev=4,e.next=7,fetch("https://fate-e-portfolio.herokuapp.com/api/guest/showUserPublic",{method:"POST",body:n});case 7:r=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.log(e.t0),e.abrupt("return",{error:e.t0});case 14:if(null===r){e.next=28;break}return e.prev=15,e.next=18,r.status;case 18:return e.t1=e.sent,e.next=21,r.json();case 21:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 25:return e.prev=25,e.t3=e.catch(15),e.abrupt("return",void 0);case 28:case"end":return e.stop()}}),e,null,[[4,10],[15,25]])})))).apply(this,arguments)}function Qe(e){return Ve.apply(this,arguments)}function Ve(){return(Ve=Object(L.a)(j.a.mark((function e(t){var a,n,r,l,o,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.link,n=t.category,r=t.artifact,l=t.attachment,Ke+"/get-attachment-byLink",(o=new FormData).append("link",a),o.append("category",n),o.append("artifact",r),o.append("attachment",l),e.prev=7,e.next=10,fetch("https://fate-e-portfolio.herokuapp.com/api/artifacts/get-attachment-byLink",{method:"POST",body:o});case 10:s=e.sent,e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(7),console.log(e.t0),e.abrupt("return",{error:e.t0});case 17:return e.prev=17,e.next=20,s.status;case 20:return e.t1=e.sent,e.next=23,s.json();case 23:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 27:return e.prev=27,e.t3=e.catch(17),e.abrupt("return",void 0);case 30:case"end":return e.stop()}}),e,null,[[7,13],[17,27]])})))).apply(this,arguments)}var He=a(186),We=a.n(He),Xe=window.location.pathname.split("/").pop();var Ze=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e){"uploading"!==e.file.status?"done"===e.file.status&&(!function(e,t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)})),a.readAsDataURL(e)}(e.file.originFileObj,(function(e){return n.setState({imageUrl:e,loading:!1})})),console.log("done!")):n.setState({loading:!0})},n.enterLoading=function(e){n.setState((function(t){var a=t.loadings,n=Object(f.a)(a);return n[e]=!0,{loadings:n}})),setTimeout((function(){n.setState((function(t){var a=t.loadings,n=Object(f.a)(a);return n[e]=!1,{loadings:n}}))}),12e3)},n.state={userInfo:null,username:"",firstname:"",lastname:"",description:"",isLoaded:!1,error:null,loading:!1,imageUrl:null,ifEdit:!1,status:!1,loadings:[],shareLink:""},n.handleChange=n.handleChange.bind(Object(g.a)(n)),n}return Object(i.a)(a,[{key:"fetchInfo",value:function(e){var t=this;(function(e){return ze.apply(this,arguments)})({link:e}).then((function(e){void 0===e?(window.location.replace("/404"),console.log("load guest failed here!")):t.setState({userInfo:e,isLoaded:!0,username:e.res.username,loading:!1,firstname:e.res.firstname,lastname:e.res.lastname,description:e.res.description,imageUrl:t.setImage(e.res.avatar)})}))}},{key:"setImage",value:function(e){if(null!==e){var t=e.image.data;return"data:"+e.imageType+";base64,"+t}return We.a}},{key:"componentDidMount",value:function(){this.fetchInfo(Xe)}},{key:"render",value:function(){var e=this.state,t=e.isLoaded,a=e.error,n=e.imageUrl;return!0===this.state.status&&window.location.replace("/admin/dashboard"),a?r.a.createElement("div",{className:"pageContainer"},r.a.createElement(Re,null),r.a.createElement("p",{className:"message"},"Something went wrong. Error: ",a.message),";"):t?r.a.createElement("div",{className:"pageContainer"},r.a.createElement(Re,null),r.a.createElement("div",{className:"grid-container"},r.a.createElement("div",{className:"leftCol"},r.a.createElement("div",{className:"avatarBox-guest"},r.a.createElement("div",{className:"avatar-uploader"},r.a.createElement("img",{src:n,alt:"avatar",style:{width:"10rem",height:"10rem"}}))),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("div",{className:"rightCol"},r.a.createElement("div",{className:"profileHeadings"},"Profile"),r.a.createElement("div",{className:"profileInfo"},"Username:",r.a.createElement("div",{className:"currentInfo"},this.state.username)),r.a.createElement("div",{className:"nameInfo"},r.a.createElement("div",{className:"profileInfo"},"First name:",r.a.createElement("div",{className:"currentInfo"},this.state.firstname)),r.a.createElement("div",{className:"profileInfo"},"Last name:",r.a.createElement("div",{className:"currentInfo"},this.state.lastname))),r.a.createElement("div",{className:"profileInfo"},"Self Introduction:",r.a.createElement("div",{className:"intro"},this.state.description))))):r.a.createElement("div",{className:"pageContainer"},r.a.createElement(Re,null),r.a.createElement(D,null))}}]),a}(n.Component),Ye=R.a.Panel,_e=window.location.pathname.split("/").pop(),$e=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).showAllCate=function(){(function(e){return Ge.apply(this,arguments)})({link:_e}).then((function(e){void 0===e?(window.location.replace("/404"),console.log("load guest failed here!")):n.setState({files:e.res,isLoaded:!0})}))},n.enterLoading=function(e){n.setState((function(t){var a=t.loadings,n=Object(f.a)(a);return n[e]=!0,{loadings:n}})),setTimeout((function(){n.setState((function(t){var a=t.loadings,n=Object(f.a)(a);return n[e]=!1,{loadings:n}}))}),5e4)},n.state={files:{},loadings:[],isLoaded:!1},n.showAllCate=n.showAllCate.bind(Object(g.a)(n)),n.downloadAttachment=n.downloadAttachment.bind(Object(g.a)(n)),n.downloadFile=n.downloadFile.bind(Object(g.a)(n)),n}return Object(i.a)(a,[{key:"componentWillUnmount",value:function(){this.setState({files:{}}),console.log("clear")}},{key:"componentDidMount",value:function(){this.showAllCate(),console.log("loading")}},{key:"downloadFile",value:function(e){var t=e.content,a=document.createElement("a");a.download=e.filename,a.href="data:application/octet-stream;base64,"+t,a.click(),this.setState({loadings:[]})}},{key:"viewFile",value:function(e){var t=e.content,a=e.filetype,n=document.getElementsByClassName("pageContainerCate")[0];if(void 0===n)console.log("Loading finished!foo undefine");else if(n.hasChildNodes()){for(var r=n.childNodes,l=0;l<r.length;l++)"OBJECT"===r[l].nodeName&&n.removeChild(r[l]);if("application/pdf"===a||"image/jpeg"===a||"image/png"===a||"text/plain"===a){var o=document.createElement("object");o.className="viewContainer","application/pdf"===a||"text/plain"===a?o.style.height="700px":(o.style.height="45%",o.style.maxHeight="650px",o.style.maxWidth="700px"),o.style.width="60%",o.style.cssFloat="center",o.type=a,o.data="data:"+a+";base64,"+t,n.appendChild(o)}else alert("Sorry, you are not allowed to view ".concat(a," files"));this.setState({loadings:[]})}}},{key:"downloadAttachment",value:function(e,t){var a=this;Qe(e).then((function(e){void 0===e?(window.location.replace("/404"),console.log("load guest failed here!")):a.downloadFile(e.res)})),this.enterLoading(t)}},{key:"viewAttachment",value:function(e,t){var a=this;Qe(e).then((function(e){void 0===e?(window.location.replace("/404"),console.log("load guest failed here!")):a.viewFile(e.res)})),this.enterLoading(t)}},{key:"render",value:function(){var e=this,t=this.state,a=t.files,n=t.loadings,l=t.isLoaded,o=[],s=new Map;for(var i in a){o.push(i);var c=[];for(var u in a[i])c.push(u);s.set(i,c)}return l?r.a.createElement("div",{className:"pageContainerCate"},r.a.createElement(Re,null),r.a.createElement("div",{className:"cateContainer"},r.a.createElement(R.a,{accordion:!0},o.map((function(t,l){return r.a.createElement(Ye,{header:"Category: "+t,key:t},r.a.createElement(R.a,{accordion:!0},s.get(t).map((function(i,c){return r.a.createElement(Ye,{header:"Artifact: "+i,key:i},r.a.createElement("div",{className:"CateInfo"},"Description:",r.a.createElement("div",{className:"currentInfo"},r.a.createElement("p",null,a[t][i][0]))),r.a.createElement("div",{className:"CateInfo"},"Attachments:",a[t][i].slice(1).map((function(u,m){return r.a.createElement("div",{key:l*o.length+c*s.get(t).length+m+1},r.a.createElement("div",{className:"currentAttachmentInfo"},r.a.createElement("div",null,u)),r.a.createElement(x.a,{loading:n[l*o.length+c*s.get(t).length+m+1],onClick:function(){return e.viewAttachment({link:_e,category:t,artifact:i,attachment:u},l*o.length+c*s.get(t).length+m+1)},id:"downloadBtn",icon:r.a.createElement(z.a,null),size:"small"},"View"),r.a.createElement(x.a,{loading:n[o.length*s.get(t).length*a[t][i].length+l*o.length+c*s.get(t).length+m*a[t][i].length+1],onClick:function(){return e.downloadAttachment({link:_e,category:t,artifact:i,attachment:u},o.length*s.get(t).length*a[t][i].length+l*o.length+c*s.get(t).length+m*a[t][i].length+1)},id:"downloadBtn",icon:r.a.createElement(G.a,null),size:"small"},"download"))})),r.a.createElement("br",null)))}))))}))))):r.a.createElement("div",{className:"pageContainer"},r.a.createElement(Re,null),r.a.createElement(D,null))}}]),a}(n.Component),et=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"returnHome",value:function(){window.location.replace("/login")}},{key:"render",value:function(){return r.a.createElement("div",{className:"pageContainerNotFound"},r.a.createElement("div",{className:"NotFoundContainer"},r.a.createElement("div",{className:"NotFoundmessage myTitle"},"404"),r.a.createElement("div",{className:"NotFoundmessage first"},"Aww..."),r.a.createElement("div",{className:"NotFoundmessage second"},"This page has gone missing."),r.a.createElement("button",{className:"NotFoundButton",onClick:this.returnHome},r.a.createElement("span",null,"Go Back Home"))))}}]),a}(n.Component),tt=a(188),at=Object(tt.a)(function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("email");null!=e&&(this.props.userStore.email=e,this.props.userStore.isLoggedIn=!0)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(p,null),r.a.createElement(A.a,null,r.a.createElement(we.d,null,r.a.createElement(we.b,{exact:!0,path:"/",render:function(e){return null!==localStorage.getItem("email")?r.a.createElement(we.a,{to:"/admin/dashboard"}):null!==localStorage.getItem("adminEmail")?r.a.createElement(we.a,{to:"/adminpage"}):r.a.createElement(we.a,{to:"/login"})}}),r.a.createElement(we.b,{exact:!0,path:"/login",render:function(t){return null!==localStorage.getItem("email")||null!==localStorage.getItem("adminEmail")?r.a.createElement(we.a,{to:"/duplogin"}):r.a.createElement(je,{userStore:e.props.userStore})}}),r.a.createElement(we.b,{exact:!0,path:"/register",render:function(t){return null!==localStorage.getItem("email")?r.a.createElement(we.a,{to:"/login"}):r.a.createElement(Ue,{userStore:e.props.userStore})}}),r.a.createElement(we.b,{exact:!0,path:"/adminpage",render:function(t){return null!==localStorage.getItem("adminEmail")?r.a.createElement(qe,{isLoggedIn:e.props.userStore.isLoggedIn,adminEmail:e.props.userStore.email,userStore:e.props.userStore}):null!==localStorage.getItem("email")?r.a.createElement(we.a,{to:"/admin/dashboard"}):r.a.createElement(we.a,{to:"/login"})}}),r.a.createElement(we.b,{exact:!0,path:"/admin",render:function(e){return r.a.createElement(we.a,{to:"/admin/dashboard"})}}),r.a.createElement(we.b,{exact:!0,path:"/admin/dashboard",render:function(t){return null!==localStorage.getItem("email")?r.a.createElement(M,{isLoggedIn:e.props.userStore.isLoggedIn,email:e.props.userStore.email,userStore:e.props.userStore}):null!==localStorage.getItem("adminEmail")?r.a.createElement(we.a,{to:"/adminpage"}):r.a.createElement(we.a,{to:"/login"})}}),r.a.createElement(we.b,{exact:!0,path:"/admin/category",render:function(t){return null!==localStorage.getItem("email")?r.a.createElement(le,{isLoggedIn:e.props.userStore.isLoggedIn,email:e.props.userStore.email,userStore:e.props.userStore}):null!==localStorage.getItem("adminEmail")?r.a.createElement(we.a,{to:"/adminpage"}):r.a.createElement(we.a,{to:"/login"})}}),r.a.createElement(we.b,{exact:!0,path:"/admin/article",render:function(t){return null!==localStorage.getItem("email")?r.a.createElement(ye,{isLoggedIn:e.props.userStore.isLoggedIn,email:e.props.userStore.email,userStore:e.props.userStore}):null!==localStorage.getItem("adminEmail")?r.a.createElement(we.a,{to:"/adminpage"}):r.a.createElement(we.a,{to:"/login"})}}),r.a.createElement(we.b,{exact:!0,path:"/duplogin",render:function(t){return null!==localStorage.getItem("email")?r.a.createElement(Fe,{isLoggedIn:e.props.userStore.isLoggedIn,email:e.props.userStore.email,userStore:e.props.userStore}):r.a.createElement(we.a,{to:"/admin"})}}),r.a.createElement(we.b,{path:"/guest/dashboard/:link",render:function(e){return r.a.createElement(Ze,null)}}),r.a.createElement(we.b,{path:"/guest/category/:link",render:function(e){return r.a.createElement($e,null)}}),r.a.createElement(we.b,{path:"/404",render:function(e){return r.a.createElement(et,null)}}),r.a.createElement(we.a,{to:"/404"}))))}}]),a}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var nt=a(11),rt=function(){function e(){var t=this;Object(s.a)(this,e),this.isLoggedIn=!1,this.email="",this.user=null,Object(nt.f)((function(){return console.log(t.report)}))}return Object(i.a)(e,[{key:"report",get:function(){return null!=localStorage.getItem("email")||null!=localStorage.getItem("adminEmail")?"Logged In!!!":"Not logged In :("}}]),e}();Object(nt.j)(rt,{isLoggedIn:nt.o,email:nt.o,user:nt.o,report:nt.g});var lt=new rt;o.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(at,{userStore:lt})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[191,1,2]]]);