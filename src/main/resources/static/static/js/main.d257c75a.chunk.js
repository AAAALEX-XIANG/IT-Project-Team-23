(this.webpackJsonppiap=this.webpackJsonppiap||[]).push([[0],{140:function(e,t,a){e.exports=a.p+"static/media/empty.8d3e0a89.png"},166:function(e,t,a){e.exports=a(308)},171:function(e,t,a){},172:function(e,t,a){},308:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(21),o=a.n(l),i=(a(171),a(18)),s=a(19),c=a(24),u=a(23),m=(a(172),a(140)),d=a.n(m);function p(){return r.a.createElement("header",{className:"mainHeader"},r.a.createElement("div",{className:"headerContainer"},r.a.createElement("div",{className:"logoContainer"},r.a.createElement("img",{src:d.a,className:"logo",alt:"logo"})),r.a.createElement("div",{className:"messageContainer"},"Welcome to Fate e-portfolio"),r.a.createElement("div",{className:"userMsg"},"Hello ",localStorage.getItem("email")," !")))}var h=a(72),g=a(36),f=a(15),v=a(39);function E(){return r.a.createElement("nav",{className:"navbar"},r.a.createElement("ul",null,r.a.createElement("li",{className:"navOption"},r.a.createElement(v.b,{to:"/admin/dashboard",className:"current-page",activeClassName:"selected"}," ","Home"," ")),r.a.createElement("li",{className:"navOption"},r.a.createElement(v.b,{to:"/admin/article",className:"current-page",activeClassName:"selected"}," ","Artifact"," ")),r.a.createElement("li",{className:"navOption"},r.a.createElement(v.b,{to:"/admin/category",className:"current-page",activeClassName:"selected"}," ","Category"," ")),r.a.createElement("li",{className:"navOption"},r.a.createElement(v.b,{to:"/login",onClick:function(){var e="https://fate-e-portfolio.herokuapp.com/api/cache/clear/"+"".concat(localStorage.getItem("email"));fetch(e,{method:"GET"}),localStorage.clear(),window.location.replace("/login")}}," ","Logout"," "))))}var b=a(312),y=a(310),w=a(79),k=a(317),C=a(318),S=a(4),N=a.n(S),x=a(11),O="https://fate-e-portfolio.herokuapp.com/api/profile";function I(){return(I=Object(x.a)(N.a.mark((function e(t){var a,n,r,l,o,i,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.firstname,r=t.lastname,l=t.username,o=t.description,(i=new FormData).append("email",a),i.append("firstname",n),i.append("lastname",r),i.append("username",l),i.append("description",o),O+"/updateProfile",e.prev=8,e.next=11,fetch("https://fate-e-portfolio.herokuapp.com/api/profile/updateProfile",{method:"POST",body:i});case 11:s=e.sent,e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(8),console.log(e.t0),e.abrupt("return",{error:e.t0});case 18:return e.next=20,s.status;case 20:return e.t1=e.sent,e.next=23,s.json();case 23:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 25:case"end":return e.stop()}}),e,null,[[8,14]])})))).apply(this,arguments)}function j(){return(j=Object(x.a)(N.a.mark((function e(t){var a,n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,O+"/viewprofile",(n=new FormData).append("email",a),console.log(a),e.prev=5,e.next=8,fetch("https://fate-e-portfolio.herokuapp.com/api/profile/viewprofile",{method:"POST",body:n});case 8:r=e.sent,e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(5),console.log(e.t0),e.abrupt("return",{error:e.t0});case 15:return console.log(r),e.next=18,r.status;case 18:return e.t1=e.sent,e.next=21,r.json();case 21:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 23:case"end":return e.stop()}}),e,null,[[5,11]])})))).apply(this,arguments)}function L(){return(L=Object(x.a)(N.a.mark((function e(t){var a,n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,O+"/generate-link",(n=new FormData).append("email",a),e.prev=4,e.next=7,fetch("https://fate-e-portfolio.herokuapp.com/api/profile/generate-link",{method:"POST",body:n});case 7:r=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.log(e.t0),e.abrupt("return",{error:e.t0});case 14:return e.next=16,r.status;case 16:return e.t1=e.sent,e.next=19,r.text();case 19:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 21:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}var A="https://fate-e-portfolio.herokuapp.com/api/profile/updateAvatar";function P(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||b.b.error("You can only upload JPG/PNG file!");var a=e.size/1024/1024<1;return a||b.b.error("Image must smaller than 1MB!"),t&&a}var T=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleChange=function(e){"uploading"!==e.file.status?"done"===e.file.status&&(!function(e,t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)})),a.readAsDataURL(e)}(e.file.originFileObj,(function(e){return n.setState({imageUrl:e,loading:!1})})),console.log("done!")):n.setState({loading:!0})},n.changeEdit=function(){n.setState({ifEdit:!0})},n.enterLoading=function(e){n.setState((function(t){var a=t.loadings,n=Object(g.a)(a);return n[e]=!0,{loadings:n}})),setTimeout((function(){n.setState((function(t){var a=t.loadings,n=Object(g.a)(a);return n[e]=!1,{loadings:n}}))}),12e3)},n.state={userInfo:null,username:"",firstname:"",lastname:"",description:"",isLoaded:!1,error:null,loading:!1,imageUrl:null,ifEdit:!1,status:!1,loadings:[],shareLink:""},n.handleChange=n.handleChange.bind(Object(f.a)(n)),n.changeEdit=n.changeEdit.bind(Object(f.a)(n)),n.handleUpdate=n.handleUpdate.bind(Object(f.a)(n)),n.submitProfile=n.submitProfile.bind(Object(f.a)(n)),n.getShareLink=n.getShareLink.bind(Object(f.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.fetchInfo(localStorage.getItem("email"))}},{key:"handleUpdate",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(h.a)({},n,a))}},{key:"submitProfile",value:function(e){var t=this,a=e.firstname,n=e.lastname,r=e.username,l=e.description;this.enterLoading(0),0===a.length||0===n.length||0===r.length?alert("name cannot be empty"):function(e){return I.apply(this,arguments)}({email:localStorage.getItem("email"),firstname:a,lastname:n,username:r,description:l}).then((function(e){return t.setState({status:e.res.result})}))}},{key:"fetchInfo",value:function(e){var t=this;(function(e){return j.apply(this,arguments)})({email:e}).then((function(e){return t.setState({userInfo:e,isLoaded:!0,username:e.res.username,loading:!1,firstname:e.res.firstname,lastname:e.res.lastname,description:e.res.description,imageUrl:t.setImage(e.res.avatar),shareLink:e.res.link})}))}},{key:"setImage",value:function(e){if(null!==e){var t=e.image.data;return"data:"+e.imageType+";base64,"+t}return null}},{key:"getShareLink",value:function(){window.confirm("Are you sure to replace your previous link with a new link?")&&(function(e){return L.apply(this,arguments)}({email:localStorage.getItem("email")}).then((function(e){return e.res})),window.location.replace("/admin/dashboard"))}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoaded,n=t.firstname,l=t.lastname,o=t.username,i=t.description,s=t.error,c=t.loading,u=t.imageUrl,m=t.ifEdit,d=t.loadings;if(!0===this.state.status&&window.location.replace("/admin/dashboard"),s)return r.a.createElement("div",{className:"pageContainer"},r.a.createElement(E,null),r.a.createElement("p",{className:"message"},"Something went wrong. Error: ",s.message),";");if(a){var p=r.a.createElement("div",null,c?r.a.createElement(k.a,null):r.a.createElement(C.a,null),r.a.createElement("div",{style:{marginTop:8}},"Upload"));return m?r.a.createElement("div",{className:"pageContainer"},r.a.createElement(E,null),r.a.createElement("div",{className:"grid-container"},r.a.createElement("div",{className:"leftCol"},r.a.createElement("div",{className:"avatarBox"},r.a.createElement(y.a,{name:"image",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:A+"/".concat(localStorage.getItem("email")),beforeUpload:P,onChange:this.handleChange},u?r.a.createElement("img",{src:u,alt:"avatar",style:{width:"200%",height:"200%"}}):p)),r.a.createElement("div",{className:"editButtonBox"},r.a.createElement("div",null,"Click the image above to update avatar"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(w.a,{block:!0,onClick:this.changeEdit},"Edit Profile"),r.a.createElement("br",null),r.a.createElement("br",null))),r.a.createElement("div",{className:"rightCol"},r.a.createElement("div",{className:"profileHeadings"},"My Account"),r.a.createElement("div",{className:"profileInfo"},"Email:",r.a.createElement("div",{className:"currentInfo"},localStorage.getItem("email"))),r.a.createElement("div",{className:"profileInfo"},"Username:",r.a.createElement("div",{className:"currentInfo"},r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleUpdate,required:!0}))),r.a.createElement("div",{className:"nameInfo"},r.a.createElement("div",{className:"profileInfo"},"First name:",r.a.createElement("div",{className:"currentInfo"},r.a.createElement("input",{type:"text",name:"firstname",value:this.state.firstname,onChange:this.handleUpdate,required:!0}))),r.a.createElement("div",{className:"profileInfo"},"Last name:",r.a.createElement("div",{className:"currentInfo"},r.a.createElement("input",{type:"text",name:"lastname",value:this.state.lastname,onChange:this.handleUpdate,required:!0})))),r.a.createElement("div",{className:"profileInfo"},"Self Introduction:",r.a.createElement("div",{className:"currentInfo"},r.a.createElement("textarea",{type:"text",name:"description",rows:"4",cols:"50",value:this.state.description,onChange:this.handleUpdate,required:!0}))),r.a.createElement("div",{className:"profileInfo"},r.a.createElement("div",{className:"updateButtonBox"},r.a.createElement(w.a,{value:"default",loading:d[0],onClick:function(){return e.submitProfile({firstname:n,lastname:l,username:o,description:i})}},"Update")))))):r.a.createElement("div",{className:"pageContainer"},r.a.createElement(E,null),r.a.createElement("div",{className:"grid-container"},r.a.createElement("div",{className:"leftCol"},r.a.createElement("div",{className:"avatarBox"},r.a.createElement(y.a,{name:"image",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:A+"/".concat(localStorage.getItem("email")),beforeUpload:P,onChange:this.handleChange},u?r.a.createElement("img",{src:u,alt:"avatar",style:{width:"200%",height:"200%"}}):p)),r.a.createElement("div",{className:"editButtonBox"},r.a.createElement("div",null,"Click the image above to update avatar"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(w.a,{block:!0,onClick:this.changeEdit},"Edit Profile"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(w.a,{block:!0,onClick:this.getShareLink},"Share Your Home Page"))),r.a.createElement("div",{className:"rightCol"},r.a.createElement("div",{className:"profileHeadings"},"My Account"),r.a.createElement("div",{className:"profileInfo"},"Email:",r.a.createElement("div",{className:"currentInfo"},localStorage.getItem("email"))),r.a.createElement("div",{className:"profileInfo"},"Username:",r.a.createElement("div",{className:"currentInfo"},this.state.username)),r.a.createElement("div",{className:"nameInfo"},r.a.createElement("div",{className:"profileInfo"},"First name:",r.a.createElement("div",{className:"currentInfo"},this.state.firstname)),r.a.createElement("div",{className:"profileInfo"},"Last name:",r.a.createElement("div",{className:"currentInfo"},this.state.lastname))),r.a.createElement("div",{className:"profileInfo"},"Self Introduction:",r.a.createElement("div",{className:"intro"},this.state.description)),r.a.createElement("div",{className:"profileInfo"},"Sharable Link:",r.a.createElement("div",{className:"currentInfo"},r.a.createElement("a",{href:"http://localhost:3000/guest/dashboard/"+this.state.shareLink},"http://localhost:3000/guest/dashboard/"+this.state.shareLink))))))}return r.a.createElement("div",{className:"pageContainer"},r.a.createElement(E,null),r.a.createElement("div",{className:"loadingContainer"},r.a.createElement("div",{class:"loading"},r.a.createElement("div",{class:"loading-item loading-one"}),r.a.createElement("div",{class:"loading-item loading-two"}),r.a.createElement("div",{class:"loading-item loading-three"}),r.a.createElement("div",{class:"loading-item loading-four"}),r.a.createElement("div",{class:"loading-item loading-five"}))))}}]),a}(n.Component),F=a(315),U=a(319),D=a(320),B="https://fate-e-portfolio.herokuapp.com/api/artifacts";function _(){return(_=Object(x.a)(N.a.mark((function e(t){var a,n,r,l,o,i,s,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.category,r=t.title,l=t.description,o=t.attachment,i=t.privacy,(s=new FormData).append("email",a),s.append("category",n),s.append("title",r),s.append("description",l),s.append("attachment",o),s.append("privacy",i),B+"/upload",e.prev=9,e.next=12,fetch("https://fate-e-portfolio.herokuapp.com/api/artifacts/upload",{method:"POST",body:s});case 12:c=e.sent,e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(9),console.log(e.t0),e.abrupt("return",{error:e.t0});case 19:return e.next=21,c.status;case 21:return e.t1=e.sent,e.next=24,c.json();case 24:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 26:case"end":return e.stop()}}),e,null,[[9,15]])})))).apply(this,arguments)}function q(e){return M.apply(this,arguments)}function M(){return(M=Object(x.a)(N.a.mark((function e(t){var a,n,r,l,o,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.category,r=t.artifact,l=t.privacy,B+"/change-privacy",(o=new FormData).append("email",a),o.append("category",n),o.append("artifact",r),o.append("privacy",l),e.prev=7,e.next=10,fetch("https://fate-e-portfolio.herokuapp.com/api/artifacts/change-privacy",{method:"POST",body:o});case 10:i=e.sent,e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(7),console.log(e.t0),e.abrupt("return",{error:e.t0});case 17:return e.t1=console,e.next=20,i;case 20:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.next=24,i.status;case 24:return e.t3=e.sent,e.next=27,i.json();case 27:return e.t4=e.sent,e.abrupt("return",{status:e.t3,res:e.t4});case 29:case"end":return e.stop()}}),e,null,[[7,13]])})))).apply(this,arguments)}function J(){return(J=Object(x.a)(N.a.mark((function e(t){var a,n,r,l;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.category,r=t.artifact,B+"/delete-artifact",e.prev=2,e.next=5,fetch("https://fate-e-portfolio.herokuapp.com/api/artifacts/delete-artifact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,category:n,artifact:r})});case 5:l=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",{error:e.t0});case 12:return e.next=14,l.status;case 14:return e.t1=e.sent,e.next=17,l.json();case 17:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 19:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function R(e){return H.apply(this,arguments)}function H(){return(H=Object(x.a)(N.a.mark((function e(t){var a,n,r,l,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.category,r=t.artifact,l=t.attachment,B+"/get-attachment",e.prev=2,e.next=5,fetch("https://fate-e-portfolio.herokuapp.com/api/artifacts/get-attachment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,category:n,artifact:r,attachment:l})});case 5:o=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",{error:e.t0});case 12:return e.t1=console,e.next=15,o;case 15:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.next=19,o.status;case 19:return e.t3=e.sent,e.next=22,o.json();case 22:return e.t4=e.sent,e.abrupt("return",{status:e.t3,res:e.t4});case 24:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function W(){return(W=Object(x.a)(N.a.mark((function e(t){var a,n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,B+"/show-Category-Artifact-Attachment",(n=new FormData).append("email",a),e.prev=4,e.next=7,fetch("https://fate-e-portfolio.herokuapp.com/api/artifacts/show-Category-Artifact-Attachment",{method:"POST",body:n});case 7:r=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.log(e.t0),e.abrupt("return",{error:e.t0});case 14:return e.t1=console,e.next=17,r;case 17:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.next=21,r.status;case 21:return e.t3=e.sent,e.next=24,r.json();case 24:return e.t4=e.sent,e.abrupt("return",{status:e.t3,res:e.t4});case 26:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}var G="https://fate-e-portfolio.herokuapp.com/api/categories";function Y(){return(Y=Object(x.a)(N.a.mark((function e(t){var a,n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.categoryName,G+"/addCategory",e.prev=2,e.next=5,fetch("https://fate-e-portfolio.herokuapp.com/api/categories/addCategory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,categoryName:n})});case 5:r=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",{error:e.t0});case 12:return e.t1=console,e.next=15,r;case 15:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.next=19,r.status;case 19:return e.t3=e.sent,e.next=22,r.json();case 22:return e.t4=e.sent,e.abrupt("return",{status:e.t3,res:e.t4});case 24:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function z(){return(z=Object(x.a)(N.a.mark((function e(t){var a,n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.categoryName,G+"/deleteCategory",e.prev=2,e.next=5,fetch("https://fate-e-portfolio.herokuapp.com/api/categories/deleteCategory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,categoryName:n})});case 5:r=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",{error:e.t0});case 12:return e.t1=console,e.next=15,r;case 15:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.next=19,r.status;case 19:return e.t3=e.sent,e.next=22,r.json();case 22:return e.t4=e.sent,e.abrupt("return",{status:e.t3,res:e.t4});case 24:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function V(e){return $.apply(this,arguments)}function $(){return($=Object(x.a)(N.a.mark((function e(t){var a,n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,G+"/showCategories",(r=new FormData).append("email",a),e.prev=4,e.next=7,fetch("https://fate-e-portfolio.herokuapp.com/api/categories/showCategories",{method:"POST",body:r});case 7:n=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.log(e.t0),e.abrupt("return",{error:e.t0});case 14:return e.next=16,n.status;case 16:return e.t1=e.sent,e.next=19,n.json();case 19:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 21:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}var K=F.a.Panel,Q=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).showAllCate=function(){(function(e){return W.apply(this,arguments)})({email:localStorage.getItem("email")}).then((function(e){return n.setState({files:e.res,isLoaded:!0})}))},n.enterLoading=function(e){n.setState((function(t){var a=t.loadings,n=Object(g.a)(a);return n[e]=!0,{loadings:n}})),setTimeout((function(){n.setState((function(t){var a=t.loadings,n=Object(g.a)(a);return n[e]=!1,{loadings:n}}))}),5e3)},n.state={files:{},loadings:[],isLoaded:!1},n.showAllCate=n.showAllCate.bind(Object(f.a)(n)),n.downloadAttachment=n.downloadAttachment.bind(Object(f.a)(n)),n.downloadFile=n.downloadFile.bind(Object(f.a)(n)),n}return Object(s.a)(a,[{key:"componentWillUnmount",value:function(){this.setState({files:{}}),console.log("clear")}},{key:"componentDidMount",value:function(){this.showAllCate(),console.log("loading")}},{key:"deleteCate",value:function(e){window.confirm("Are you sure to delete "+e.categoryName+"?")&&function(e){return z.apply(this,arguments)}(e).then((function(e){return window.location.replace("/admin/category")}))}},{key:"deleteArti",value:function(e){window.confirm("Are you sure to delete "+e.artifact+"?")&&function(e){return J.apply(this,arguments)}(e).then((function(e){return window.location.replace("/admin/category")}))}},{key:"changePrivacy",value:function(e){"public"===e.privacy?window.confirm("Are you sure to change public to private?")&&q({email:localStorage.getItem("email"),category:e.category,artifact:e.artifact,privacy:"private"}).then((function(e){return window.location.replace("/admin/category")})):window.confirm("Are you sure to change private to public?")&&q({email:localStorage.getItem("email"),category:e.category,artifact:e.artifact,privacy:"public"}).then((function(e){return window.location.replace("/admin/category")}))}},{key:"downloadFile",value:function(e){var t=e.content,a=document.getElementsByClassName("pageContainer")[0];if(a.hasChildNodes()){for(var n=a.childNodes,r=0;r<n.length;r++)console.log(n[r].nodeName),"OBJECT"===n[r].nodeName&&a.removeChild(n[r]);var l=document.createElement("a");l.style.cssFloat="right",l.download=e.filename,l.href="data:application/octet-stream;base64,"+t,a.appendChild(l).click()}this.setState({loadings:[]})}},{key:"viewFile",value:function(e){var t=e.content,a=e.filetype,n=document.getElementsByClassName("pageContainer")[0];if(n.hasChildNodes()){for(var r=n.childNodes,l=0;l<r.length;l++)if(console.log(r[l].nodeName),"OBJECT"===r[l].nodeName)n.removeChild(r[l]);else if("A"===r[l].nodeName){n.removeChild(r[l]);break}if("application/pdf"===a||"image/jpeg"===a||"image/png"===a||"text/plain"===a){var o=document.createElement("object");o.class="viewContainer",o.style.height="application/pdf"===a||"text/plain"===a?"700px":"45%",o.style.width="60%",o.style.cssFloat="right",o.type=a,o.data="data:"+a+";base64,"+t,n.appendChild(o)}else alert("Sorry, you are not allowed to view ".concat(a," files"));this.setState({loadings:[]})}}},{key:"downloadAttachment",value:function(e){var t=this;R(e).then((function(e){return t.downloadFile(e.res)})),this.enterLoading(1)}},{key:"viewAttachment",value:function(e){var t=this;R(e).then((function(e){return t.viewFile(e.res)})),this.enterLoading(0)}},{key:"render",value:function(){var e=this,t=this.state,a=t.files,n=t.loadings,l=t.isLoaded,o=[],i=new Map;for(var s in a){o.push(s);var c=[];for(var u in a[s])c.push(u);i.set(s,c)}return l?r.a.createElement("div",{className:"pageContainer"},r.a.createElement(E,null),r.a.createElement(F.a,null,o.map((function(t){return r.a.createElement(K,{header:t,key:t},r.a.createElement(w.a,{loading:n[0],onClick:function(){return e.deleteCate({email:localStorage.getItem("email"),categoryName:t})}},"Delete Category"),r.a.createElement("br",null),r.a.createElement(F.a,null,i.get(t).map((function(l){return r.a.createElement(K,{header:l,key:l},r.a.createElement(w.a,{loading:n[0],onClick:function(){return e.deleteArti({email:localStorage.getItem("email"),category:t,artifact:l})}},"Delete Artifact"),r.a.createElement(w.a,{loading:n[0],onClick:function(){return e.changePrivacy({email:localStorage.getItem("email"),category:t,artifact:l,privacy:a[t][l][1]})}},a[t][l][1]),r.a.createElement("br",null),"Description:",r.a.createElement("p",null,a[t][l][0]),"Attachments:",a[t][l].slice(2).map((function(a){return r.a.createElement("div",{key:a},r.a.createElement("p",null,a,r.a.createElement(w.a,{loading:n[0],onClick:function(){return e.viewAttachment({email:localStorage.getItem("email"),category:t,artifact:l,attachment:a})},id:"downloadBtn",type:"primary",shape:"round",icon:r.a.createElement(U.a,null)},"View"),r.a.createElement(w.a,{loading:n[1],onClick:function(){return e.downloadAttachment({email:localStorage.getItem("email"),category:t,artifact:l,attachment:a})},id:"downloadBtn",type:"primary",shape:"round",icon:r.a.createElement(D.a,null)},"download")))})))}))))})))):r.a.createElement("div",{className:"pageContainer"},r.a.createElement(E,null),r.a.createElement("div",{className:"loadingContainer"},r.a.createElement("div",{class:"loading"},r.a.createElement("div",{class:"loading-item loading-one"}),r.a.createElement("div",{class:"loading-item loading-two"}),r.a.createElement("div",{class:"loading-item loading-three"}),r.a.createElement("div",{class:"loading-item loading-four"}),r.a.createElement("div",{class:"loading-item loading-five"}))))}}]),a}(n.Component),X=a(87),Z=a(311),ee=a(316),te=a(309),ae=a(314),ne=(a(225),a(321)),re=X.a.Option,le=y.a.Dragger,oe=0,ie={labelCol:{span:6},wrapperCol:{span:14}},se=[],ce="https://fate-e-portfolio.herokuapp.com/api/cache/upload",ue={name:"file",multiple:!0,action:ce+"/".concat(localStorage.getItem("email")),onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log(e.file,e.fileList),"done"===t?(se=e.fileList,console.log("file:::",se),b.b.success("".concat(e.file.name," file uploaded successfully."))):"error"===t&&b.b.error("".concat(e.file.name," file upload failed."))}},me=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).categories=V({email:localStorage.getItem("email")}).then((function(e){return n.setState({items:e.res.categories})})),n.onNameChange=function(e){n.setState({name:e.target.value,value:e.target.value})},n.onCategoryChange=function(e){n.setState({name:e}),console.log("event",e)},n.loadAllcates=function(){V({email:localStorage.getItem("email")}).then((function(e){return n.setState({items:e.res.categories})}))},n.onTitleChange=function(e){n.setState({title:e.target.value})},n.onDescriptionChange=function(e){n.setState({description:e.target.value})},n.onPrivacyChange=function(e){n.setState({privacy:e.target.value})},n.addItem=function(){var e=n.state,t=e.items,a=e.name,r=e.value;-1===t.indexOf(r)?(n.setState({items:[].concat(Object(g.a)(t),[a||"New item ".concat(oe++)]),name:"",value:""}),function(e){Y.apply(this,arguments)}({email:localStorage.getItem("email"),categoryName:a})):alert("Category exists")},n.uploadFiles=function(){var e;n.enterLoading(0);var t=[];for(e=0;e<se.length;e++)t.push(se[e].name);""===n.state.title?alert("Title cannot be empty"):""===n.state.privacy?alert("Please choose privary"):function(e){return _.apply(this,arguments)}({email:localStorage.getItem("email"),category:n.state.name,title:n.state.title,description:n.state.description,attachment:t,privacy:n.state.privacy}).then((function(e){return n.checkArti(e.res)}))},n.enterLoading=function(e){n.setState((function(t){var a=t.loadings,n=Object(g.a)(a);return n[e]=!0,{loadings:n}})),setTimeout((function(){n.setState((function(t){var a=t.loadings,n=Object(g.a)(a);return n[e]=!1,{loadings:n}}))}),3e3)},n.state={value:"",items:[],name:"",title:"",description:"",privacy:"",loadings:[]},n}return Object(s.a)(a,[{key:"componentWillUnmount",value:function(){this.setState({value:"",items:[],name:"",title:"",description:"",privacy:"",loadings:[]}),console.log("clear artifact")}},{key:"componentDidMount",value:function(){this.setState({value:"",items:[],name:"",title:"",description:"",privacy:"",loadings:[]}),this.loadAllcates(),console.log("load artifact")}},{key:"checkArti",value:function(e){e.result?window.location.replace("/admin/dashboard"):alert(e.reason)}},{key:"render",value:function(){var e=this,t=this.state,a=t.items,n=t.title,l=t.description,o=t.value,i=t.loadings;return ue.action===ce+"/null"&&window.location.replace("/admin/article"),r.a.createElement("div",{className:"pageContainer"},r.a.createElement(E,null),r.a.createElement(Z.a,Object.assign({name:"validate_other"},ie),r.a.createElement(Z.a.Item,null,r.a.createElement("div",{id:"header"},r.a.createElement("br",null),r.a.createElement("br",null),"Upload Document")),r.a.createElement(Z.a.Item,{label:"Title",required:!0},r.a.createElement(ee.a,{placeholder:"Enter Title",style:{flex:"auto"},value:n,onChange:this.onTitleChange})),r.a.createElement(Z.a.Item,{label:"Description"},r.a.createElement(ee.a,{placeholder:"Enter Description",style:{flex:"auto"},value:l,onChange:this.onDescriptionChange})),r.a.createElement(Z.a.Item,{label:"Select the category",required:!0},r.a.createElement(X.a,{onChange:this.onCategoryChange,style:{width:240},placeholder:"add new category",dropdownRender:function(t){return r.a.createElement("div",null,t,r.a.createElement(te.a,{style:{margin:"4px 0"}}),r.a.createElement("div",{style:{display:"flex",flexWrap:"nowrap",padding:8}},r.a.createElement(ee.a,{value:o,style:{flex:"auto"},onChange:e.onNameChange}),r.a.createElement("button",{onClick:e.addItem}," Add item ")))}},a.map((function(e){return r.a.createElement(re,{key:e},e)})))),r.a.createElement(Z.a.Item,{name:"radio-group",label:"Privacy",required:!0},r.a.createElement(ae.a.Group,null,r.a.createElement(ae.a,{value:"public",onChange:this.onPrivacyChange},"Public"),r.a.createElement(ae.a,{value:"private",onChange:this.onPrivacyChange},"Private"))),r.a.createElement(Z.a.Item,{label:"Dragger"},r.a.createElement(le,ue,r.a.createElement("p",{className:"ant-upload-drag-icon"},r.a.createElement(ne.a,null)),r.a.createElement("p",{className:"ant-upload-text"},"Click or drag file to this area to upload"),r.a.createElement("p",{className:"ant-upload-hint"},"Support for a single or bulk upload. Strictly prohibit from uploading company data or other band files"))),r.a.createElement(Z.a.Item,{wrapperCol:{span:12,offset:6}},r.a.createElement("p",null," ","Note: You can upload several files, but the size of each file must be less than 1 MB."," "),r.a.createElement(w.a,{value:"default",loading:i[0],onClick:this.uploadFiles},"Submit"))))}}]),a}(n.Component),de=a(63),pe="https://fate-e-portfolio.herokuapp.com/api/account";function he(e){return ge.apply(this,arguments)}function ge(){return(ge=Object(x.a)(N.a.mark((function e(t){var a,n,r,l,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.email,n=t.password,r=pe+"/login",(l=new FormData).append("email",a),l.append("password",n),a){e.next=8;break}return alert("please enter your email"),e.abrupt("return");case 8:if(n){e.next=11;break}return alert("please enter your password"),e.abrupt("return");case 11:return e.prev=11,e.next=14,fetch(r,{method:"POST",body:l});case 14:o=e.sent,e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(11),console.log(e.t0),e.abrupt("return",{error:e.t0});case 21:return e.t1=o.status,e.next=24,o.json();case 24:return e.t2=e.sent,e.abrupt("return",{status:e.t1,user:e.t2});case 26:case"end":return e.stop()}}),e,null,[[11,17]])})))).apply(this,arguments)}function fe(e){return ve.apply(this,arguments)}function ve(){return(ve=Object(x.a)(N.a.mark((function e(t){var a,n,r,l,o,i,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.first_name,n=t.last_name,r=t.email,l=t.username,o=t.password,i=t.studentId,pe+"/register",console.log("register"),e.prev=3,e.next=6,fetch("https://fate-e-portfolio.herokuapp.com/api/account/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstname:a,lastname:n,studentId:i,emailaddress:r,username:l,password:o})});case 6:s=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),console.log(e.t0),e.abrupt("return",{error:e.t0});case 13:return console.log(s),e.t1=s.status,e.next=17,s.json();case 17:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 19:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}var Ee=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={email:"",password:"",wrongAttempt:!1},n.handleChange=n.handleChange.bind(Object(f.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(f.a)(n)),n}return Object(s.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(h.a)({},n,a))}},{key:"handleSubmit",value:function(){var e=Object(x.a)(N.a.mark((function e(t){var a,n,r,l;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,he({email:this.state.email,password:this.state.password});case 3:a=e.sent,n=a.status,r=a.user,200===n&&(this.setState({wrongAttempt:!1}),r.result?"User"===r.reason?(this.props.userStore.isLoggedIn=!0,this.props.userStore.email=this.state.email,localStorage.setItem("email",this.state.email),l="https://fate-e-portfolio.herokuapp.com/api/cache/clear/"+"".concat(localStorage.getItem("email")),fetch(l,{method:"GET"}),this.props.history.push("/admin/dashboard")):(this.props.userStore.isLoggedIn=!0,localStorage.setItem("adminEmail",this.state.email),this.props.history.push("/adminpage")):this.setState({wrongAttempt:!0}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h1",null,"Log In"),r.a.createElement("div",{className:"formDisplay"},r.a.createElement("label",null,r.a.createElement("input",{placeholder:"Email",type:"text",name:"email",value:this.state.email,onChange:this.handleChange,required:!0})),r.a.createElement("label",null,r.a.createElement("input",{placeholder:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange,required:!0})),r.a.createElement("div",{className:"subTitle"},"Don't have an account? ",r.a.createElement("a",{href:"/register"},"Register")),r.a.createElement("br",null),this.state.wrongAttempt?r.a.createElement("div",{className:"formError"},"Please check your email and password"):null,r.a.createElement("input",{type:"submit",value:"Log In"})))}}]),a}(r.a.Component),be=Object(de.g)(Ee);function ye(e){return r.a.createElement("div",{className:"wrap"},r.a.createElement("div",{className:"container"},r.a.createElement(be,{userStore:e.userStore})),r.a.createElement("ul",null,r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null)))}var we=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={first_name:"",last_name:"",email:"",studentId:"",username:"",password:"",password_confirm:"",result:!1,success:!1,res:""},n.handleChange=n.handleChange.bind(Object(f.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(f.a)(n)),n}return Object(s.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(h.a)({},n,a))}},{key:"handleSubmit",value:function(){var e=Object(x.a)(N.a.mark((function e(t){var a,n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(this.state.password.length<6)){e.next=4;break}return alert("Password should not be less than 6 characters"),e.abrupt("return");case 4:if(this.state.password===this.state.password_confirm){e.next=7;break}return alert("Inconsistent password"),e.abrupt("return");case 7:return e.next=9,fe({first_name:this.state.first_name,last_name:this.state.last_name,studentId:this.state.studentId,email:this.state.email,username:this.state.username,password:this.state.password,password_confirm:this.state.password_confirm});case 9:a=e.sent,n=a.status,r=a.res,console.log(n),r.result?this.setState({success:200===n,res:r}):alert(r.reason),this.state.success&&this.props.history.push("/login");case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h1",null,"Register"),r.a.createElement("div",{className:"subTitle"},"Already have an account? ",r.a.createElement("a",{href:"/"},"Log in")),r.a.createElement("div",{className:"floatLeft"},r.a.createElement("label",null,r.a.createElement("input",{placeholder:"First name",type:"text",name:"first_name",value:this.state.first_name,onChange:this.handleChange,required:!0})),r.a.createElement("label",null,r.a.createElement("input",{placeholder:"Last name",type:"text",name:"last_name",value:this.state.last_name,onChange:this.handleChange,required:!0})),r.a.createElement("label",null,r.a.createElement("input",{placeholder:"Student ID",type:"text",name:"studentId",value:this.state.studentId,onChange:this.handleChange,required:!0})),r.a.createElement("label",null,r.a.createElement("input",{placeholder:"Email",type:"email",name:"email",value:this.state.email,onChange:this.handleChange,required:!0}))),r.a.createElement("div",{className:"floatRight"},r.a.createElement("label",null,r.a.createElement("input",{placeholder:"Username",type:"text",name:"username",value:this.state.username,onChange:this.handleChange,required:!0})),r.a.createElement("label",null,r.a.createElement("input",{placeholder:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange,required:!0})),r.a.createElement("label",null,r.a.createElement("input",{placeholder:"Confirm your password",type:"password",name:"password_confirm",value:this.state.password_confirm,onChange:this.handleChange,required:!0})),!this.state.success&&r.a.createElement("div",{className:"formError"},this.state.res),r.a.createElement("input",{type:"submit",value:"Register"})))}}]),a}(r.a.Component),ke=Object(de.g)(we);function Ce(){return r.a.createElement("div",{className:"wrap"},r.a.createElement("div",{className:"container"},r.a.createElement(ke,null)),r.a.createElement("ul",null,r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null)))}var Se=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"pageContainer"},r.a.createElement(E,null),r.a.createElement("div",null,"Your have already login, please log out to switch the account."))}}]),a}(n.Component),Ne=a(313);function xe(){return(xe=Object(x.a)(N.a.mark((function e(t){var a,n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.info,"https://fate-e-portfolio.herokuapp.com/api/search/show",(n=new FormData).append("info",a),e.prev=4,e.next=7,fetch("https://fate-e-portfolio.herokuapp.com/api/search/show",{method:"POST",body:n});case 7:r=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.log(e.t0),e.abrupt("return",{error:e.t0});case 14:return e.t1=console,e.next=17,r;case 17:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.next=21,r.status;case 21:return e.t3=e.sent,e.next=24,r.json();case 24:return e.t4=e.sent,e.abrupt("return",{status:e.t3,res:e.t4});case 26:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}var Oe=ee.a.Search,Ie=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).searchUser=function(e){(function(e){return xe.apply(this,arguments)})({info:e}).then((function(e){n.setState({data:e.res})}))},n.logout=function(){localStorage.clear(),window.location.replace("/login")},n.state={initLoading:!0,loading:!1,data:{}},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.state.data,a=[];for(var n in t)a.push(n);return r.a.createElement("div",null,r.a.createElement("div",{className:"adminSearch"},r.a.createElement(Oe,{placeholder:"search users",onSearch:function(t){return e.searchUser(t)},enterButton:!0}),r.a.createElement("div",null,r.a.createElement(v.b,{to:"/login",onClick:this.logout}," ","Logout"," "))),r.a.createElement(Ne.b,{itemLayout:"horizontal",dataSource:a,renderItem:function(e){return r.a.createElement(Ne.b.Item,null,r.a.createElement(Ne.b.Item.Meta,{title:r.a.createElement("a",{href:"http://localhost:3000/guest/dashboard/"+t[e][4]},t[e][1]),description:t[e][2]+" "+t[e][3]+", "+t[e][0]}))}}))}}]),a}(r.a.Component),je=window.location.pathname.split("/").pop();function Le(){return r.a.createElement("nav",{className:"navbar"},r.a.createElement("ul",null,r.a.createElement("li",{className:"navOption"},r.a.createElement(v.b,{to:"/guest/dashboard/"+je,className:"current-page",activeClassName:"selected"}," ","Home"," ")),r.a.createElement("li",{className:"navOption"},r.a.createElement(v.b,{to:"/guest/category/"+je,className:"current-page",activeClassName:"selected"}," ","Category"," "))))}var Ae="https://fate-e-portfolio.herokuapp.com/api/guest",Pe="https://fate-e-portfolio.herokuapp.com/api/artifacts";function Te(){return(Te=Object(x.a)(N.a.mark((function e(t){var a,n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.link,Ae+"/showUserProfile",(n=new FormData).append("link",a),e.prev=4,e.next=7,fetch("https://fate-e-portfolio.herokuapp.com/api/guest/showUserProfile",{method:"POST",body:n});case 7:r=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.log(e.t0),e.abrupt("return",{error:e.t0});case 14:return e.next=16,r.status;case 16:return e.t1=e.sent,e.next=19,r.json();case 19:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 21:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}function Fe(){return(Fe=Object(x.a)(N.a.mark((function e(t){var a,n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.link,Ae+"/showUserPublic",(n=new FormData).append("link",a),e.prev=4,e.next=7,fetch("https://fate-e-portfolio.herokuapp.com/api/guest/showUserPublic",{method:"POST",body:n});case 7:r=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.log(e.t0),e.abrupt("return",{error:e.t0});case 14:return e.next=16,r.status;case 16:return e.t1=e.sent,e.next=19,r.json();case 19:return e.t2=e.sent,e.abrupt("return",{status:e.t1,res:e.t2});case 21:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}function Ue(e){return De.apply(this,arguments)}function De(){return(De=Object(x.a)(N.a.mark((function e(t){var a,n,r,l,o,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.link,n=t.category,r=t.artifact,l=t.attachment,Pe+"/get-attachment-byLink",(o=new FormData).append("link",a),o.append("category",n),o.append("artifact",r),o.append("attachment",l),e.prev=7,e.next=10,fetch("https://fate-e-portfolio.herokuapp.com/api/artifacts/get-attachment-byLink",{method:"POST",body:o});case 10:i=e.sent,e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(7),console.log(e.t0),e.abrupt("return",{error:e.t0});case 17:return e.t1=console,e.next=20,i;case 20:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.next=24,i.status;case 24:return e.t3=e.sent,e.next=27,i.json();case 27:return e.t4=e.sent,e.abrupt("return",{status:e.t3,res:e.t4});case 29:case"end":return e.stop()}}),e,null,[[7,13]])})))).apply(this,arguments)}var Be=window.location.pathname.split("/").pop();var _e=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleChange=function(e){"uploading"!==e.file.status?"done"===e.file.status&&(!function(e,t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)})),a.readAsDataURL(e)}(e.file.originFileObj,(function(e){return n.setState({imageUrl:e,loading:!1})})),console.log("done!")):n.setState({loading:!0})},n.enterLoading=function(e){n.setState((function(t){var a=t.loadings,n=Object(g.a)(a);return n[e]=!0,{loadings:n}})),setTimeout((function(){n.setState((function(t){var a=t.loadings,n=Object(g.a)(a);return n[e]=!1,{loadings:n}}))}),12e3)},n.state={userInfo:null,username:"",firstname:"",lastname:"",description:"",isLoaded:!1,error:null,loading:!1,imageUrl:null,ifEdit:!1,status:!1,loadings:[],shareLink:""},n.handleChange=n.handleChange.bind(Object(f.a)(n)),n}return Object(s.a)(a,[{key:"fetchInfo",value:function(e){var t=this;(function(e){return Te.apply(this,arguments)})({link:e}).then((function(e){return t.setState({userInfo:e,isLoaded:!0,username:e.res.username,loading:!1,firstname:e.res.firstname,lastname:e.res.lastname,description:e.res.description,imageUrl:t.setImage(e.res.avatar)})}))}},{key:"setImage",value:function(e){if(null!==e){var t=e.image.data;return"data:"+e.imageType+";base64,"+t}return null}},{key:"componentDidMount",value:function(){this.fetchInfo(Be)}},{key:"render",value:function(){var e=this.state,t=e.isLoaded,a=e.error,n=e.imageUrl;return!0===this.state.status&&window.location.replace("/admin/dashboard"),a?r.a.createElement("div",{className:"pageContainer"},r.a.createElement(Le,null),r.a.createElement("p",{className:"message"},"Something went wrong. Error: ",a.message),";"):t?r.a.createElement("div",{className:"pageContainer"},r.a.createElement(Le,null),r.a.createElement("div",{className:"grid-container"},r.a.createElement("div",{className:"leftCol"},r.a.createElement("div",{className:"avatarBox-guest"},r.a.createElement("div",{className:"avatar-uploader"},r.a.createElement("img",{src:n,alt:"avatar",style:{width:"150%",height:"150%"}}))),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("div",{className:"rightCol"},r.a.createElement("div",{className:"profileHeadings"},"My Account"),r.a.createElement("div",{className:"profileInfo"},"Username:",r.a.createElement("div",{className:"currentInfo"},this.state.username)),r.a.createElement("div",{className:"nameInfo"},r.a.createElement("div",{className:"profileInfo"},"First name:",r.a.createElement("div",{className:"currentInfo"},this.state.firstname)),r.a.createElement("div",{className:"profileInfo"},"Last name:",r.a.createElement("div",{className:"currentInfo"},this.state.lastname))),r.a.createElement("div",{className:"profileInfo"},"Self Introduction:",r.a.createElement("div",{className:"intro"},this.state.description))))):r.a.createElement("div",{className:"pageContainer"},r.a.createElement(Le,null),r.a.createElement("div",{className:"loadingContainer"},r.a.createElement("div",{class:"loading"},r.a.createElement("div",{class:"loading-item loading-one"}),r.a.createElement("div",{class:"loading-item loading-two"}),r.a.createElement("div",{class:"loading-item loading-three"}),r.a.createElement("div",{class:"loading-item loading-four"}),r.a.createElement("div",{class:"loading-item loading-five"}))))}}]),a}(n.Component),qe=F.a.Panel,Me=window.location.pathname.split("/").pop(),Je=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).showAllCate=function(){(function(e){return Fe.apply(this,arguments)})({link:Me}).then((function(e){return n.setState({files:e.res,isLoaded:!0})}))},n.enterLoading=function(e){n.setState((function(t){var a=t.loadings,n=Object(g.a)(a);return n[e]=!0,{loadings:n}})),setTimeout((function(){n.setState((function(t){var a=t.loadings,n=Object(g.a)(a);return n[e]=!1,{loadings:n}}))}),5e4)},n.state={files:{},loadings:[],isLoaded:!1},n.showAllCate=n.showAllCate.bind(Object(f.a)(n)),n.downloadAttachment=n.downloadAttachment.bind(Object(f.a)(n)),n.downloadFile=n.downloadFile.bind(Object(f.a)(n)),n}return Object(s.a)(a,[{key:"componentWillUnmount",value:function(){this.setState({files:{}}),console.log("clear")}},{key:"componentDidMount",value:function(){this.showAllCate(),console.log("loading")}},{key:"downloadFile",value:function(e){var t=e.content,a=document.getElementsByClassName("pageContainer")[0];if(a.hasChildNodes()){for(var n=a.childNodes,r=0;r<n.length;r++)console.log(n[r].nodeName),"OBJECT"===n[r].nodeName&&a.removeChild(n[r]);var l=document.createElement("a");l.style.cssFloat="right",l.download=e.filename,l.href="data:application/octet-stream;base64,"+t,a.appendChild(l).click()}this.setState({loadings:[]})}},{key:"viewFile",value:function(e){var t=e.content,a=e.filetype,n=document.getElementsByClassName("pageContainer")[0];if(n.hasChildNodes()){for(var r=n.childNodes,l=0;l<r.length;l++)if(console.log(r[l].nodeName),"OBJECT"===r[l].nodeName)n.removeChild(r[l]);else if("A"===r[l].nodeName){n.removeChild(r[l]);break}if("application/pdf"===a||"image/jpeg"===a||"text/plain"===a){var o=document.createElement("object");o.class="viewContainer",o.style.height="application/pdf"===a||"text/plain"===a?"700px":"45%",o.style.width="60%",o.style.cssFloat="right",o.type=a,o.data="data:"+a+";base64,"+t,n.appendChild(o)}else alert("Sorry, you are not allowed to view ".concat(a," files"));this.setState({loadings:[]})}}},{key:"downloadAttachment",value:function(e){var t=this;Ue(e).then((function(e){return t.downloadFile(e.res)})),this.enterLoading(1)}},{key:"viewAttachment",value:function(e){var t=this;Ue(e).then((function(e){return t.viewFile(e.res)})),this.enterLoading(0)}},{key:"render",value:function(){var e=this,t=this.state,a=t.files,n=t.loadings,l=t.isLoaded,o=[],i=new Map;for(var s in a){o.push(s);var c=[];for(var u in a[s])c.push(u);i.set(s,c)}return l?r.a.createElement("div",{className:"pageContainer"},r.a.createElement(Le,null),r.a.createElement(F.a,null,o.map((function(t){return r.a.createElement(qe,{header:t,key:t},r.a.createElement(F.a,null,i.get(t).map((function(l){return r.a.createElement(qe,{header:l,key:l},"Description:",r.a.createElement("p",null,a[t][l][0]),"Attachments:",a[t][l].slice(1).map((function(a){return r.a.createElement("div",{key:a},r.a.createElement("p",null,a,r.a.createElement(w.a,{loading:n[0],onClick:function(){return e.viewAttachment({link:Me,category:t,artifact:l,attachment:a})},id:"downloadBtn",type:"primary",shape:"round",icon:r.a.createElement(U.a,null)},"View"),r.a.createElement(w.a,{loading:n[1],onClick:function(){return e.downloadAttachment({link:Me,category:t,artifact:l,attachment:a})},id:"downloadBtn",type:"primary",shape:"round",icon:r.a.createElement(D.a,null)},"download")))})))}))))})))):r.a.createElement("div",{className:"pageContainer"},r.a.createElement(Le,null),r.a.createElement("div",{className:"loadingContainer"},r.a.createElement("div",{class:"loading"},r.a.createElement("div",{class:"loading-item loading-one"}),r.a.createElement("div",{class:"loading-item loading-two"}),r.a.createElement("div",{class:"loading-item loading-three"}),r.a.createElement("div",{class:"loading-item loading-four"}),r.a.createElement("div",{class:"loading-item loading-five"}))))}}]),a}(n.Component),Re=a(161),He=Object(Re.a)(function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("email");null!=e&&(console.log(e),this.props.userStore.email=e,this.props.userStore.isLoggedIn=!0)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(p,null),r.a.createElement(v.a,null,r.a.createElement(de.d,null,r.a.createElement(de.b,{exact:!0,path:"/",render:function(e){return null!==localStorage.getItem("email")?r.a.createElement(de.a,{to:"/admin/dashboard"}):null!==localStorage.getItem("adminEmail")?r.a.createElement(de.a,{to:"/adminpage"}):r.a.createElement(de.a,{to:"/login"})}}),r.a.createElement(de.b,{exact:!0,path:"/login",render:function(t){return null!==localStorage.getItem("email")?r.a.createElement(de.a,{to:"/duplogin"}):r.a.createElement(ye,{userStore:e.props.userStore})}}),r.a.createElement(de.b,{exact:!0,path:"/register",render:function(t){return null!==localStorage.getItem("email")?r.a.createElement(de.a,{to:"/login"}):r.a.createElement(Ce,{userStore:e.props.userStore})}}),r.a.createElement(de.b,{exact:!0,path:"/adminpage",render:function(t){return null!==localStorage.getItem("adminEmail")?r.a.createElement(Ie,{isLoggedIn:e.props.userStore.isLoggedIn,adminEmail:e.props.userStore.email,userStore:e.props.userStore}):null!==localStorage.getItem("email")?r.a.createElement(de.a,{to:"/admin/dashboard"}):r.a.createElement(de.a,{to:"/login"})}}),r.a.createElement(de.b,{exact:!0,path:"/admin",render:function(e){return r.a.createElement(de.a,{to:"/admin/dashboard"})}}),r.a.createElement(de.b,{exact:!0,path:"/admin/dashboard",render:function(t){return null!==localStorage.getItem("email")?r.a.createElement(T,{isLoggedIn:e.props.userStore.isLoggedIn,email:e.props.userStore.email,userStore:e.props.userStore}):null!==localStorage.getItem("adminEmail")?r.a.createElement(de.a,{to:"/adminpage"}):r.a.createElement(de.a,{to:"/login"})}}),r.a.createElement(de.b,{exact:!0,path:"/admin/category",render:function(t){return null!==localStorage.getItem("email")?r.a.createElement(Q,{isLoggedIn:e.props.userStore.isLoggedIn,email:e.props.userStore.email,userStore:e.props.userStore}):null!==localStorage.getItem("adminEmail")?r.a.createElement(de.a,{to:"/adminpage"}):r.a.createElement(de.a,{to:"/login"})}}),r.a.createElement(de.b,{exact:!0,path:"/admin/article",render:function(t){return null!==localStorage.getItem("email")?r.a.createElement(me,{isLoggedIn:e.props.userStore.isLoggedIn,email:e.props.userStore.email,userStore:e.props.userStore}):null!==localStorage.getItem("adminEmail")?r.a.createElement(de.a,{to:"/adminpage"}):r.a.createElement(de.a,{to:"/login"})}}),r.a.createElement(de.b,{exact:!0,path:"/duplogin",render:function(t){return null!==localStorage.getItem("email")?r.a.createElement(Se,{isLoggedIn:e.props.userStore.isLoggedIn,email:e.props.userStore.email,userStore:e.props.userStore}):r.a.createElement(de.a,{to:"/admin"})}}),r.a.createElement(de.b,{path:"/guest/dashboard/:link",render:function(e){return r.a.createElement(_e,null)}}),r.a.createElement(de.b,{path:"/guest/category/:link",render:function(e){return r.a.createElement(Je,null)}}),r.a.createElement(de.a,{to:"/404"}))))}}]),a}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var We=a(6),Ge=function(){function e(){var t=this;Object(i.a)(this,e),this.isLoggedIn=!1,this.email="",this.user=null,Object(We.f)((function(){return console.log(t.report)}))}return Object(s.a)(e,[{key:"report",get:function(){return null!=localStorage.getItem("email")||null!=localStorage.getItem("adminEmail")?"Logged In!!!":"Not logged In :("}}]),e}();Object(We.j)(Ge,{isLoggedIn:We.o,email:We.o,user:We.o,report:We.g});var Ye=new Ge;o.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(He,{userStore:Ye})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[166,1,2]]]);